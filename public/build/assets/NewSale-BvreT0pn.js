import{z as W,L as T,r as I,aj as se,l as ce,F as fe,C as ve,k as he,c as D,o as k,a as b,b as P,u as w,I as me,f as B,A as ge,e as Q,d as u,t as G,h as $,G as pe,K as Y,i as we,s as te}from"./app-S3kx2b0d.js";import{a as Ce,b as be,c as ye,d as Ee,_ as xe}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CMVN-k-g.js";import{_ as _e,a as ae}from"./MoneyInput-BKjo1ri7.js";import{_ as Me}from"./DialogFooter.vue_vue_type_script_setup_true_lang-Y11NQ4Uk.js";import{_ as Pe}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-D0XSB0NE.js";import{_ as V}from"./Button.vue_vue_type_script_setup_true_lang-Bu1_OuLZ.js";import{_ as Re}from"./Input.vue_vue_type_script_setup_true_lang-Zo94wQZG.js";import{_ as K}from"./Label.vue_vue_type_script_setup_true_lang-Y6gPyrr0.js";import{P as Ae}from"./plus-D_WhIUaA.js";import{C as re}from"./check-B_oeUEI1.js";import{L as oe}from"./loader-circle-BH5IDTPz.js";import{S as Ne}from"./smartphone-DVMWLSSb.js";import{c as Se}from"./createLucideIcon-B4R1MoSR.js";import{C as ne}from"./circle-check-ousfSyrm.js";import{C as Ie}from"./copy-Bjr5nk5x.js";import{C as Fe}from"./circle-alert-V_6AzMZE.js";import{E as ke}from"./eye-cyb8XuSu.js";import"./index-BGfks83y.js";import"./floating-ui.vue-Bsqwf4g4.js";import"./utils-CytzSlOG.js";import"./x-Dj8XHr1q.js";import"./Primitive-odI4fKTA.js";import"./index-BszNJtDQ.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=Se("WifiIcon",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/*!
 * qrcode.vue v3.6.0
 * A Vue.js component to generate QRCode. Both support Vue 2 and Vue 3
 * © 2017-PRESENT @scopewu(https://github.com/scopewu)
 * MIT License.
 */var O=function(){return O=Object.assign||function(h){for(var f,c=1,m=arguments.length;c<m;c++){f=arguments[c];for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(h[g]=f[g])}return h},O.apply(this,arguments)};var q;(function(i){var h=function(){function r(e,t,a,o){if(this.version=e,this.errorCorrectionLevel=t,this.modules=[],this.isFunction=[],e<r.MIN_VERSION||e>r.MAX_VERSION)throw new RangeError("Version value out of range");if(o<-1||o>7)throw new RangeError("Mask value out of range");this.size=e*4+17;for(var l=[],s=0;s<this.size;s++)l.push(!1);for(var s=0;s<this.size;s++)this.modules.push(l.slice()),this.isFunction.push(l.slice());this.drawFunctionPatterns();var v=this.addEccAndInterleave(a);if(this.drawCodewords(v),o==-1)for(var p=1e9,s=0;s<8;s++){this.applyMask(s),this.drawFormatBits(s);var x=this.getPenaltyScore();x<p&&(o=s,p=x),this.applyMask(s)}m(0<=o&&o<=7),this.mask=o,this.applyMask(o),this.drawFormatBits(o),this.isFunction=[]}return r.encodeText=function(e,t){var a=i.QrSegment.makeSegments(e);return r.encodeSegments(a,t)},r.encodeBinary=function(e,t){var a=i.QrSegment.makeBytes(e);return r.encodeSegments([a],t)},r.encodeSegments=function(e,t,a,o,l,s){if(a===void 0&&(a=1),o===void 0&&(o=40),l===void 0&&(l=-1),s===void 0&&(s=!0),!(r.MIN_VERSION<=a&&a<=o&&o<=r.MAX_VERSION)||l<-1||l>7)throw new RangeError("Invalid value");var v,p;for(v=a;;v++){var x=r.getNumDataCodewords(v,t)*8,M=g.getTotalBits(e,v);if(M<=x){p=M;break}if(v>=o)throw new RangeError("Data too long")}for(var _=0,A=[r.Ecc.MEDIUM,r.Ecc.QUARTILE,r.Ecc.HIGH];_<A.length;_++){var y=A[_];s&&p<=r.getNumDataCodewords(v,y)*8&&(t=y)}for(var d=[],n=0,C=e;n<C.length;n++){var E=C[n];f(E.mode.modeBits,4,d),f(E.numChars,E.mode.numCharCountBits(v),d);for(var N=0,R=E.getData();N<R.length;N++){var z=R[N];d.push(z)}}m(d.length==p);var S=r.getNumDataCodewords(v,t)*8;m(d.length<=S),f(0,Math.min(4,S-d.length),d),f(0,(8-d.length%8)%8,d),m(d.length%8==0);for(var F=236;d.length<S;F^=253)f(F,8,d);for(var L=[];L.length*8<d.length;)L.push(0);return d.forEach(function(X,H){return L[H>>>3]|=X<<7-(H&7)}),new r(v,t,L,l)},r.prototype.getModule=function(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]},r.prototype.getModules=function(){return this.modules},r.prototype.drawFunctionPatterns=function(){for(var e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var t=this.getAlignmentPatternPositions(),a=t.length,e=0;e<a;e++)for(var o=0;o<a;o++)e==0&&o==0||e==0&&o==a-1||e==a-1&&o==0||this.drawAlignmentPattern(t[e],t[o]);this.drawFormatBits(0),this.drawVersion()},r.prototype.drawFormatBits=function(e){for(var t=this.errorCorrectionLevel.formatBits<<3|e,a=t,o=0;o<10;o++)a=a<<1^(a>>>9)*1335;var l=(t<<10|a)^21522;m(l>>>15==0);for(var o=0;o<=5;o++)this.setFunctionModule(8,o,c(l,o));this.setFunctionModule(8,7,c(l,6)),this.setFunctionModule(8,8,c(l,7)),this.setFunctionModule(7,8,c(l,8));for(var o=9;o<15;o++)this.setFunctionModule(14-o,8,c(l,o));for(var o=0;o<8;o++)this.setFunctionModule(this.size-1-o,8,c(l,o));for(var o=8;o<15;o++)this.setFunctionModule(8,this.size-15+o,c(l,o));this.setFunctionModule(8,this.size-8,!0)},r.prototype.drawVersion=function(){if(!(this.version<7)){for(var e=this.version,t=0;t<12;t++)e=e<<1^(e>>>11)*7973;var a=this.version<<12|e;m(a>>>18==0);for(var t=0;t<18;t++){var o=c(a,t),l=this.size-11+t%3,s=Math.floor(t/3);this.setFunctionModule(l,s,o),this.setFunctionModule(s,l,o)}}},r.prototype.drawFinderPattern=function(e,t){for(var a=-4;a<=4;a++)for(var o=-4;o<=4;o++){var l=Math.max(Math.abs(o),Math.abs(a)),s=e+o,v=t+a;0<=s&&s<this.size&&0<=v&&v<this.size&&this.setFunctionModule(s,v,l!=2&&l!=4)}},r.prototype.drawAlignmentPattern=function(e,t){for(var a=-2;a<=2;a++)for(var o=-2;o<=2;o++)this.setFunctionModule(e+o,t+a,Math.max(Math.abs(o),Math.abs(a))!=1)},r.prototype.setFunctionModule=function(e,t,a){this.modules[t][e]=a,this.isFunction[t][e]=!0},r.prototype.addEccAndInterleave=function(e){var t=this.version,a=this.errorCorrectionLevel;if(e.length!=r.getNumDataCodewords(t,a))throw new RangeError("Invalid argument");for(var o=r.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][t],l=r.ECC_CODEWORDS_PER_BLOCK[a.ordinal][t],s=Math.floor(r.getNumRawDataModules(t)/8),v=o-s%o,p=Math.floor(s/o),x=[],M=r.reedSolomonComputeDivisor(l),_=0,A=0;_<o;_++){var y=e.slice(A,A+p-l+(_<v?0:1));A+=y.length;var d=r.reedSolomonComputeRemainder(y,M);_<v&&y.push(0),x.push(y.concat(d))}for(var n=[],C=function(E){x.forEach(function(N,R){(E!=p-l||R>=v)&&n.push(N[E])})},_=0;_<x[0].length;_++)C(_);return m(n.length==s),n},r.prototype.drawCodewords=function(e){if(e.length!=Math.floor(r.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var t=0,a=this.size-1;a>=1;a-=2){a==6&&(a=5);for(var o=0;o<this.size;o++)for(var l=0;l<2;l++){var s=a-l,v=(a+1&2)==0,p=v?this.size-1-o:o;!this.isFunction[p][s]&&t<e.length*8&&(this.modules[p][s]=c(e[t>>>3],7-(t&7)),t++)}}m(t==e.length*8)},r.prototype.applyMask=function(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(var t=0;t<this.size;t++)for(var a=0;a<this.size;a++){var o=void 0;switch(e){case 0:o=(a+t)%2==0;break;case 1:o=t%2==0;break;case 2:o=a%3==0;break;case 3:o=(a+t)%3==0;break;case 4:o=(Math.floor(a/3)+Math.floor(t/2))%2==0;break;case 5:o=a*t%2+a*t%3==0;break;case 6:o=(a*t%2+a*t%3)%2==0;break;case 7:o=((a+t)%2+a*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][a]&&o&&(this.modules[t][a]=!this.modules[t][a])}},r.prototype.getPenaltyScore=function(){for(var e=0,t=0;t<this.size;t++){for(var a=!1,o=0,l=[0,0,0,0,0,0,0],s=0;s<this.size;s++)this.modules[t][s]==a?(o++,o==5?e+=r.PENALTY_N1:o>5&&e++):(this.finderPenaltyAddHistory(o,l),a||(e+=this.finderPenaltyCountPatterns(l)*r.PENALTY_N3),a=this.modules[t][s],o=1);e+=this.finderPenaltyTerminateAndCount(a,o,l)*r.PENALTY_N3}for(var s=0;s<this.size;s++){for(var a=!1,v=0,l=[0,0,0,0,0,0,0],t=0;t<this.size;t++)this.modules[t][s]==a?(v++,v==5?e+=r.PENALTY_N1:v>5&&e++):(this.finderPenaltyAddHistory(v,l),a||(e+=this.finderPenaltyCountPatterns(l)*r.PENALTY_N3),a=this.modules[t][s],v=1);e+=this.finderPenaltyTerminateAndCount(a,v,l)*r.PENALTY_N3}for(var t=0;t<this.size-1;t++)for(var s=0;s<this.size-1;s++){var p=this.modules[t][s];p==this.modules[t][s+1]&&p==this.modules[t+1][s]&&p==this.modules[t+1][s+1]&&(e+=r.PENALTY_N2)}for(var x=0,M=0,_=this.modules;M<_.length;M++){var A=_[M];x=A.reduce(function(n,C){return n+(C?1:0)},x)}var y=this.size*this.size,d=Math.ceil(Math.abs(x*20-y*10)/y)-1;return m(0<=d&&d<=9),e+=d*r.PENALTY_N4,m(0<=e&&e<=2568888),e},r.prototype.getAlignmentPatternPositions=function(){if(this.version==1)return[];for(var e=Math.floor(this.version/7)+2,t=Math.floor((this.version*8+e*3+5)/(e*4-4))*2,a=[6],o=this.size-7;a.length<e;o-=t)a.splice(1,0,o);return a},r.getNumRawDataModules=function(e){if(e<r.MIN_VERSION||e>r.MAX_VERSION)throw new RangeError("Version number out of range");var t=(16*e+128)*e+64;if(e>=2){var a=Math.floor(e/7)+2;t-=(25*a-10)*a-55,e>=7&&(t-=36)}return m(208<=t&&t<=29648),t},r.getNumDataCodewords=function(e,t){return Math.floor(r.getNumRawDataModules(e)/8)-r.ECC_CODEWORDS_PER_BLOCK[t.ordinal][e]*r.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][e]},r.reedSolomonComputeDivisor=function(e){if(e<1||e>255)throw new RangeError("Degree out of range");for(var t=[],a=0;a<e-1;a++)t.push(0);t.push(1);for(var o=1,a=0;a<e;a++){for(var l=0;l<t.length;l++)t[l]=r.reedSolomonMultiply(t[l],o),l+1<t.length&&(t[l]^=t[l+1]);o=r.reedSolomonMultiply(o,2)}return t},r.reedSolomonComputeRemainder=function(e,t){for(var a=t.map(function(p){return 0}),o=function(p){var x=p^a.shift();a.push(0),t.forEach(function(M,_){return a[_]^=r.reedSolomonMultiply(M,x)})},l=0,s=e;l<s.length;l++){var v=s[l];o(v)}return a},r.reedSolomonMultiply=function(e,t){if(e>>>8||t>>>8)throw new RangeError("Byte out of range");for(var a=0,o=7;o>=0;o--)a=a<<1^(a>>>7)*285,a^=(t>>>o&1)*e;return m(a>>>8==0),a},r.prototype.finderPenaltyCountPatterns=function(e){var t=e[1];m(t<=this.size*3);var a=t>0&&e[2]==t&&e[3]==t*3&&e[4]==t&&e[5]==t;return(a&&e[0]>=t*4&&e[6]>=t?1:0)+(a&&e[6]>=t*4&&e[0]>=t?1:0)},r.prototype.finderPenaltyTerminateAndCount=function(e,t,a){return e&&(this.finderPenaltyAddHistory(t,a),t=0),t+=this.size,this.finderPenaltyAddHistory(t,a),this.finderPenaltyCountPatterns(a)},r.prototype.finderPenaltyAddHistory=function(e,t){t[0]==0&&(e+=this.size),t.pop(),t.unshift(e)},r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r}();i.QrCode=h;function f(r,e,t){if(e<0||e>31||r>>>e)throw new RangeError("Value out of range");for(var a=e-1;a>=0;a--)t.push(r>>>a&1)}function c(r,e){return(r>>>e&1)!=0}function m(r){if(!r)throw new Error("Assertion error")}var g=function(){function r(e,t,a){if(this.mode=e,this.numChars=t,this.bitData=a,t<0)throw new RangeError("Invalid argument");this.bitData=a.slice()}return r.makeBytes=function(e){for(var t=[],a=0,o=e;a<o.length;a++){var l=o[a];f(l,8,t)}return new r(r.Mode.BYTE,e.length,t)},r.makeNumeric=function(e){if(!r.isNumeric(e))throw new RangeError("String contains non-numeric characters");for(var t=[],a=0;a<e.length;){var o=Math.min(e.length-a,3);f(parseInt(e.substring(a,a+o),10),o*3+1,t),a+=o}return new r(r.Mode.NUMERIC,e.length,t)},r.makeAlphanumeric=function(e){if(!r.isAlphanumeric(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");var t=[],a;for(a=0;a+2<=e.length;a+=2){var o=r.ALPHANUMERIC_CHARSET.indexOf(e.charAt(a))*45;o+=r.ALPHANUMERIC_CHARSET.indexOf(e.charAt(a+1)),f(o,11,t)}return a<e.length&&f(r.ALPHANUMERIC_CHARSET.indexOf(e.charAt(a)),6,t),new r(r.Mode.ALPHANUMERIC,e.length,t)},r.makeSegments=function(e){return e==""?[]:r.isNumeric(e)?[r.makeNumeric(e)]:r.isAlphanumeric(e)?[r.makeAlphanumeric(e)]:[r.makeBytes(r.toUtf8ByteArray(e))]},r.makeEci=function(e){var t=[];if(e<0)throw new RangeError("ECI assignment value out of range");if(e<128)f(e,8,t);else if(e<16384)f(2,2,t),f(e,14,t);else if(e<1e6)f(6,3,t),f(e,21,t);else throw new RangeError("ECI assignment value out of range");return new r(r.Mode.ECI,0,t)},r.isNumeric=function(e){return r.NUMERIC_REGEX.test(e)},r.isAlphanumeric=function(e){return r.ALPHANUMERIC_REGEX.test(e)},r.prototype.getData=function(){return this.bitData.slice()},r.getTotalBits=function(e,t){for(var a=0,o=0,l=e;o<l.length;o++){var s=l[o],v=s.mode.numCharCountBits(t);if(s.numChars>=1<<v)return 1/0;a+=4+v+s.bitData.length}return a},r.toUtf8ByteArray=function(e){e=encodeURI(e);for(var t=[],a=0;a<e.length;a++)e.charAt(a)!="%"?t.push(e.charCodeAt(a)):(t.push(parseInt(e.substring(a+1,a+3),16)),a+=2);return t},r.NUMERIC_REGEX=/^[0-9]*$/,r.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,r.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r}();i.QrSegment=g})(q||(q={}));(function(i){(function(h){var f=function(){function c(m,g){this.ordinal=m,this.formatBits=g}return c.LOW=new c(0,1),c.MEDIUM=new c(1,0),c.QUARTILE=new c(2,3),c.HIGH=new c(3,2),c}();h.Ecc=f})(i.QrCode||(i.QrCode={}))})(q||(q={}));(function(i){(function(h){var f=function(){function c(m,g){this.modeBits=m,this.numBitsCharCount=g}return c.prototype.numCharCountBits=function(m){return this.numBitsCharCount[Math.floor((m+7)/17)]},c.NUMERIC=new c(1,[10,12,14]),c.ALPHANUMERIC=new c(2,[9,11,13]),c.BYTE=new c(4,[8,16,16]),c.KANJI=new c(8,[8,10,12]),c.ECI=new c(7,[0,0,0]),c}();h.Mode=f})(i.QrSegment||(i.QrSegment={}))})(q||(q={}));var U=q,j="L",J={L:U.QrCode.Ecc.LOW,M:U.QrCode.Ecc.MEDIUM,Q:U.QrCode.Ecc.QUARTILE,H:U.QrCode.Ecc.HIGH},ze=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function Z(i){return i in J}function ie(i,h){h===void 0&&(h=0);var f=[];return i.forEach(function(c,m){var g=null;c.forEach(function(r,e){if(!r&&g!==null){f.push("M".concat(g+h," ").concat(m+h,"h").concat(e-g,"v1H").concat(g+h,"z")),g=null;return}if(e===c.length-1){if(!r)return;g===null?f.push("M".concat(e+h,",").concat(m+h," h1v1H").concat(e+h,"z")):f.push("M".concat(g+h,",").concat(m+h," h").concat(e+1-g,"v1H").concat(g+h,"z"));return}r&&g===null&&(g=e)})}),f.join("")}function le(i,h,f,c){var m=c.width,g=c.height,r=c.x,e=c.y,t=i.length+f*2,a=Math.floor(h*.1),o=t/h,l=(m||a)*o,s=(g||a)*o,v=r==null?i.length/2-l/2:r*o,p=e==null?i.length/2-s/2:e*o,x=null;if(c.excavate){var M=Math.floor(v),_=Math.floor(p),A=Math.ceil(l+v-M),y=Math.ceil(s+p-_);x={x:M,y:_,w:A,h:y}}return{x:v,y:p,h:s,w:l,excavation:x}}function de(i,h){return i.slice().map(function(f,c){return c<h.y||c>=h.y+h.h?f:f.map(function(m,g){return g<h.x||g>=h.x+h.w?m:!1})})}var ee={value:{type:String,required:!0,default:""},size:{type:Number,default:100},level:{type:String,default:j,validator:function(i){return Z(i)}},background:{type:String,default:"#fff"},foreground:{type:String,default:"#000"},margin:{type:Number,required:!1,default:0},imageSettings:{type:Object,required:!1,default:function(){return{}}},gradient:{type:Boolean,required:!1,default:!1},gradientType:{type:String,required:!1,default:"linear",validator:function(i){return["linear","radial"].indexOf(i)>-1}},gradientStartColor:{type:String,required:!1,default:"#000"},gradientEndColor:{type:String,required:!1,default:"#fff"}},Le=O(O({},ee),{renderAs:{type:String,required:!1,default:"canvas",validator:function(i){return["canvas","svg"].indexOf(i)>-1}}}),Be=W({name:"QRCodeSvg",props:ee,setup:function(i){var h=I(0),f=I(""),c,m=function(){var r=i.value,e=i.level,t=i.margin,a=t>>>0,o=Z(e)?e:j,l=U.QrCode.encodeText(r,J[o]).getModules();if(h.value=l.length+a*2,i.imageSettings.src){var s=le(l,i.size,a,i.imageSettings);c={x:s.x+a,y:s.y+a,width:s.w,height:s.h},s.excavation&&(l=de(l,s.excavation))}f.value=ie(l,a)},g=function(){if(!i.gradient)return null;var r=i.gradientType==="linear"?{x1:"0%",y1:"0%",x2:"100%",y2:"100%"}:{cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"};return T(i.gradientType==="linear"?"linearGradient":"radialGradient",O({id:"qr-gradient"},r),[T("stop",{offset:"0%",style:{stopColor:i.gradientStartColor}}),T("stop",{offset:"100%",style:{stopColor:i.gradientEndColor}})])};return m(),se(m),function(){return T("svg",{width:i.size,height:i.size,"shape-rendering":"crispEdges",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(h.value," ").concat(h.value)},[T("defs",{},[g()]),T("rect",{width:"100%",height:"100%",fill:i.background}),T("path",{fill:i.gradient?"url(#qr-gradient)":i.foreground,d:f.value}),i.imageSettings.src&&T("image",O({href:i.imageSettings.src},c))])}}}),Oe=W({name:"QRCodeCanvas",props:ee,setup:function(i,h){var f=I(null),c=I(null),m=function(){var r=i.value,e=i.level,t=i.size,a=i.margin,o=i.background,l=i.foreground,s=i.gradient,v=i.gradientType,p=i.gradientStartColor,x=i.gradientEndColor,M=a>>>0,_=Z(e)?e:j,A=f.value;if(A){var y=A.getContext("2d");if(y){var d=U.QrCode.encodeText(r,J[_]).getModules(),n=d.length+M*2,C=c.value,E={x:0,y:0,width:0,height:0},N=i.imageSettings.src&&C!=null&&C.naturalWidth!==0&&C.naturalHeight!==0;if(N){var R=le(d,i.size,M,i.imageSettings);E={x:R.x+M,y:R.y+M,width:R.w,height:R.h},R.excavation&&(d=de(d,R.excavation))}var z=window.devicePixelRatio||1,S=t/n*z;if(A.height=A.width=t*z,y.scale(S,S),y.fillStyle=o,y.fillRect(0,0,n,n),s){var F=void 0;v==="linear"?F=y.createLinearGradient(0,0,n,n):F=y.createRadialGradient(n/2,n/2,0,n/2,n/2,n/2),F.addColorStop(0,p),F.addColorStop(1,x),y.fillStyle=F}else y.fillStyle=l;ze?y.fill(new Path2D(ie(d,M))):d.forEach(function(L,X){L.forEach(function(H,ue){H&&y.fillRect(ue+M,X+M,1,1)})}),N&&y.drawImage(C,E.x,E.y,E.width,E.height)}}};ce(m),se(m);var g=h.attrs.style;return function(){return T(fe,[T("canvas",O(O({},h.attrs),{ref:f,style:O(O({},g),{width:"".concat(i.size,"px"),height:"".concat(i.size,"px")})})),i.imageSettings.src&&T("img",{ref:c,src:i.imageSettings.src,style:{display:"none"},onLoad:m})])}}}),De=W({name:"Qrcode",render:function(){var i=this.$props,h=i.renderAs,f=i.value,c=i.size,m=i.margin,g=i.level,r=i.background,e=i.foreground,t=i.imageSettings,a=i.gradient,o=i.gradientType,l=i.gradientStartColor,s=i.gradientEndColor;return T(h==="svg"?Be:Oe,{value:f,size:c,margin:m,level:g,background:r,foreground:e,imageSettings:t,gradient:a,gradientType:o,gradientStartColor:l,gradientEndColor:s})},props:Le});const Qe={class:"space-y-6"},qe={class:"space-y-4"},Ue={key:0,class:"space-y-3 pt-3 border-t"},Ge={class:"flex justify-between items-center"},Ve={class:"text-sm font-semibold text-red-600 dark:text-red-400"},He={class:"flex justify-between items-center"},$e={class:"text-sm font-semibold text-green-600 dark:text-green-400"},Xe={key:0,class:"space-y-6 flex flex-col items-center justify-center w-full relative min-h-[500px]"},Ye={key:0,class:"text-center space-y-6 w-full"},Ke={class:"flex flex-col items-center space-y-3"},We={class:"relative"},je={class:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center"},Je={class:"absolute -top-1 -right-1"},Ze={class:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center animate-pulse"},et={key:0,class:"relative mx-auto w-fit"},tt={class:"relative p-6 bg-white dark:bg-gray-900 rounded-2xl shadow-lg border-2 border-dashed border-blue-200 dark:border-blue-800"},at={class:"bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4 w-full"},rt={class:"text-center"},ot={class:"text-2xl font-bold text-green-600 dark:text-green-400"},nt={class:"w-full space-y-3"},st={class:"flex items-center space-x-2"},it={key:0,class:"text-xs text-green-600 flex items-center gap-1"},lt={key:1,class:"text-xs text-muted-foreground"},dt={key:0,class:"text-center space-y-6 w-full"},ut={class:"flex flex-col items-center space-y-4"},ct={class:"relative"},ft={class:"w-20 h-20 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center animate-pulse"},vt={class:"bg-yellow-50 dark:bg-yellow-900/20 rounded-xl p-4 w-full border border-yellow-200 dark:border-yellow-800"},ht={class:"flex items-center justify-center space-x-2"},mt={key:0,class:"text-center space-y-6 w-full"},gt={class:"flex flex-col items-center space-y-4"},pt={class:"relative"},wt={class:"w-24 h-24 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full flex items-center justify-center animate-bounce"},Ct={class:"bg-green-50 dark:bg-green-900/20 rounded-xl p-6 w-full border border-green-200 dark:border-green-800"},bt={class:"space-y-3"},yt={class:"flex justify-between items-center"},Et={class:"text-lg font-bold text-green-600 dark:text-green-400"},xt={class:"flex justify-between items-center"},_t={class:"text-sm font-medium"},Mt={class:"pt-2"},Kt={__name:"NewSale",props:{acquirerFixedFee:{type:Number,default:1},acquirerPercentageFee:{type:Number,default:0},gatewayPixFixed:{type:Number,default:.04},gatewayPixPercentage:{type:Number,default:0}},setup(i){const h=i,f=ve({amount:0}),c=I(0),m=he(()=>{const d=parseFloat(f.amount)||0;if(d<=0)return{totalFees:0,netAmount:0};const n=d.toFixed(2),C=parseFloat(n),E=h.acquirerFixedFee||0,N=h.acquirerPercentageFee||0,R=h.gatewayPixFixed||0,z=h.gatewayPixPercentage||0;let S=0;if(R>0||z>0){const L=parseFloat((C*z/100).toFixed(2));S=parseFloat((R+L).toFixed(2))}else{const L=parseFloat((C*N/100).toFixed(2));S=parseFloat((E+L).toFixed(2))}const F=parseFloat((C-S).toFixed(2));return{totalFees:Math.max(0,S),netAmount:Math.max(0,F)}}),g=d=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(d),r=I(!1),e=I("waiting"),t=I(!1),a=I(!1),o=I(!1),l=I(!1),s=I(null),v=I("");let p=null;const x=I(null),M=()=>{a.value=!0,c.value=parseFloat(f.amount)||0,te.post(route("sale.generate-charge"),{amount:f.amount}).then(d=>{var n,C,E,N,R,z,S;if(console.log("Resposta completa da API:",d),console.log("Dados da resposta:",d.data),console.log("Estrutura qrcode:",(n=d.data)==null?void 0:n.qrcode),console.log("Content do qrcode:",(E=(C=d.data)==null?void 0:C.qrcode)==null?void 0:E.content),d.status===200&&d.data)if(d.data.status==="success"&&d.data.qrcode&&d.data.qrcode.content){console.log("QR Code content encontrado:",d.data.qrcode.content),console.log("Tamanho do código:",d.data.qrcode.content.length),s.value=d;const F=((N=d.data.qrcode)==null?void 0:N.content)||"";v.value=F,console.log("responseGenerateCharge após atribuição:",s.value),console.log("responseGenerateCharge.data:",s.value.data),console.log("responseGenerateCharge.data.qrcode:",(R=s.value.data)==null?void 0:R.qrcode),console.log("responseGenerateCharge.data.qrcode.content:",(S=(z=s.value.data)==null?void 0:z.qrcode)==null?void 0:S.content),console.log("pixCode.value:",v.value),console.log("Código PIX extraído:",F),x.value=d.data.sale_id,r.value=!0,a.value=!1,e.value="waiting",_()}else console.error("Resposta sem QR code válido:",d.data),console.error("Estrutura completa:",JSON.stringify(d.data,null,2)),alert("Erro: Não foi possível gerar o QR code. "+(d.data.message||"Tente novamente.")),a.value=!1;else console.error("Resposta inválida:",d),alert("Erro ao gerar cobrança. Tente novamente."),a.value=!1}).catch(d=>{var C,E;console.error("Erro na requisição:",d);const n=((E=(C=d.response)==null?void 0:C.data)==null?void 0:E.message)||d.message||"Erro ao gerar cobrança. Verifique se a adquirente está configurada corretamente.";alert("Erro: "+n),a.value=!1})},_=()=>{p&&clearInterval(p),p=setInterval(()=>{x.value&&te.get(route("sale.check-status",x.value)).then(d=>{if(d.data.status==="success"){const n=d.data.payment_status;console.log("Status do pagamento:",n,d.data),n==="paid"||n==="pago"||n==="approved"?(clearInterval(p),p=null,e.value="completed",l.value=!0,o.value=!0,console.log("Pagamento confirmado! Atualizando UI..."),setTimeout(()=>{window.location.reload()},2e3)):(n==="expired"||n==="cancelled")&&(clearInterval(p),p=null,alert("O pagamento foi "+(n==="expired"?"expirado":"cancelado")+". Por favor, gere um novo QR code."),y())}}).catch(d=>{console.error("Erro ao verificar status do pagamento:",d)})},1e3)},A=async()=>{var d,n,C;try{const E=v.value||((C=(n=(d=s.value)==null?void 0:d.data)==null?void 0:n.qrcode)==null?void 0:C.content);if(!E){console.error("Código PIX não disponível para copiar");return}await navigator.clipboard.writeText(E),t.value=!0,setTimeout(()=>{t.value=!1},2e3)}catch(E){console.error("Erro ao copiar:",E)}},y=()=>{r.value=!1,o.value=!1,l.value=!1,e.value="waiting",s.value=null,v.value="",f.amount=0,c.value=0,t.value=!1,x.value=null,p&&(clearInterval(p),p=null)};return(d,n)=>(k(),D("div",null,[b(w(xe),{"onUpdate:open":n[2]||(n[2]=C=>{C&&y()})},{default:P(()=>[b(w(Pe),{"as-child":""},{default:P(()=>[me(d.$slots,"trigger",{},()=>[b(w(V),{variant:"outline",onClick:y},{default:P(()=>[b(w(Ae),{class:"h-4 w-4"}),n[3]||(n[3]=B(" Nova Venda "))]),_:1})])]),_:3}),b(w(Ce),{class:"sm:max-w-lg"},{default:P(()=>[ge(u("div",Qe,[b(w(be),{class:"text-center"},{default:P(()=>[b(w(ye),{class:"text-xl"},{default:P(()=>n[4]||(n[4]=[B("Nova Venda")])),_:1}),b(w(Ee),{class:"text-base"},{default:P(()=>n[5]||(n[5]=[B(" Adicione uma nova transação para o seu dashboard. ")])),_:1})]),_:1}),u("div",qe,[b(_e,{modelValue:w(f).amount,"onUpdate:modelValue":n[0]||(n[0]=C=>w(f).amount=C),label:"Valor a Depositar"},null,8,["modelValue"]),w(f).amount>0?(k(),D("div",Ue,[u("div",Ge,[b(w(K),{class:"text-sm text-muted-foreground"},{default:P(()=>n[6]||(n[6]=[B("Taxas:")])),_:1}),u("span",Ve,G(g(m.value.totalFees)),1)]),u("div",He,[b(w(K),{class:"text-sm text-muted-foreground"},{default:P(()=>n[7]||(n[7]=[B("Valor Líquido:")])),_:1}),u("span",$e,G(g(m.value.netAmount)),1)])])):Q("",!0)]),b(w(Me),{class:"flex items-center justify-between gap-3 w-full"},{default:P(()=>[b(w(ae),{"as-child":""},{default:P(()=>[b(w(V),{disabled:a.value,type:"button",variant:"secondary",class:"w-full"},{default:P(()=>n[8]||(n[8]=[B(" Cancelar ")])),_:1},8,["disabled"])]),_:1}),b(w(V),{onClick:M,disabled:a.value,type:"submit",class:"w-full"},{default:P(()=>[a.value?(k(),$(w(oe),{key:1,class:"h-4 w-4 animate-spin"})):(k(),$(w(re),{key:0,class:"h-4 w-4"})),n[9]||(n[9]=B(" Confirmar "))]),_:1},8,["disabled"])]),_:1})],512),[[pe,!r.value]]),r.value?(k(),D("div",Xe,[b(Y,{name:"slide-fade",mode:"out-in"},{default:P(()=>{var C,E,N;return[e.value==="waiting"?(k(),D("div",Ye,[u("div",Ke,[u("div",We,[u("div",je,[b(w(Ne),{class:"w-8 h-8 text-blue-600 dark:text-blue-400"})]),u("div",Je,[u("div",Ze,[b(w(Te),{class:"w-3 h-3 text-white"})])])]),n[10]||(n[10]=u("div",null,[u("h2",{class:"text-xl font-bold text-foreground"},"Aguardando pagamento"),u("p",{class:"text-sm text-muted-foreground mt-1"}," Escaneie o QR Code com seu aplicativo de pagamento ")],-1))]),s.value&&s.value.data&&s.value.data.qrcode&&s.value.data.qrcode.content?(k(),D("div",et,[u("div",tt,[b(De,{value:v.value||((N=(E=(C=s.value)==null?void 0:C.data)==null?void 0:E.qrcode)==null?void 0:N.content)||"",size:220,level:"H",class:"rounded-lg"},null,8,["value"]),n[11]||(n[11]=u("div",{class:"absolute top-2 left-2 w-4 h-4 border-l-2 border-t-2 border-blue-500 rounded-tl-lg"},null,-1)),n[12]||(n[12]=u("div",{class:"absolute top-2 right-2 w-4 h-4 border-r-2 border-t-2 border-blue-500 rounded-tr-lg"},null,-1)),n[13]||(n[13]=u("div",{class:"absolute bottom-2 left-2 w-4 h-4 border-l-2 border-b-2 border-blue-500 rounded-bl-lg"},null,-1)),n[14]||(n[14]=u("div",{class:"absolute bottom-2 right-2 w-4 h-4 border-r-2 border-b-2 border-blue-500 rounded-br-lg"},null,-1))]),n[15]||(n[15]=u("div",{class:"absolute -top-3 -right-3"},[u("div",{class:"relative"},[u("div",{class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center animate-pulse"},[u("div",{class:"w-3 h-3 bg-white rounded-full"})]),u("div",{class:"absolute inset-0 w-8 h-8 bg-blue-500 rounded-full animate-ping opacity-30"})])],-1))])):Q("",!0),u("div",at,[u("div",rt,[n[16]||(n[16]=u("p",{class:"text-sm text-muted-foreground"},"Valor a receber",-1)),u("p",ot," R$ "+G(c.value.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})),1)])]),u("div",nt,[b(w(K),{class:"text-sm font-medium"},{default:P(()=>n[17]||(n[17]=[B("Código PIX Copia e Cola")])),_:1}),u("div",st,[b(w(Re),{modelValue:v.value,"onUpdate:modelValue":n[1]||(n[1]=R=>v.value=R),readonly:"",class:"font-mono text-xs",placeholder:"Aguardando código PIX..."},null,8,["modelValue"]),b(w(V),{onClick:A,size:"sm",variant:"outline",disabled:!v.value,class:we(["px-3 transition-all duration-200",t.value?"bg-green-50 border-green-200 text-green-700":""])},{default:P(()=>[t.value?(k(),$(w(ne),{key:0,class:"w-4 h-4"})):(k(),$(w(Ie),{key:1,class:"w-4 h-4"}))]),_:1},8,["disabled","class"])]),t.value?(k(),D("p",it,[b(w(ne),{class:"w-3 h-3"}),n[18]||(n[18]=B(" Código copiado com sucesso! "))])):Q("",!0),v.value?Q("",!0):(k(),D("p",lt," Carregando código PIX... "))])])):Q("",!0)]}),_:1}),b(Y,{name:"slide-fade",mode:"out-in"},{default:P(()=>[e.value==="processing"?(k(),D("div",dt,[u("div",ut,[u("div",ct,[u("div",ft,[b(w(oe),{class:"w-10 h-10 text-white animate-spin"})]),n[19]||(n[19]=u("div",{class:"absolute inset-0 w-20 h-20 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full animate-ping opacity-20"},null,-1))]),n[20]||(n[20]=u("div",null,[u("h2",{class:"text-xl font-bold text-yellow-600 dark:text-yellow-400"}," Processando pagamento... "),u("p",{class:"text-sm text-muted-foreground mt-1"}," Aguarde, estamos confirmando seu pagamento ")],-1))]),n[22]||(n[22]=u("div",{class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden"},[u("div",{class:"bg-gradient-to-r from-yellow-400 to-orange-500 h-2 rounded-full animate-pulse progress-bar"})],-1)),u("div",vt,[u("div",ht,[b(w(Fe),{class:"w-5 h-5 text-yellow-600 dark:text-yellow-400"}),n[21]||(n[21]=u("p",{class:"text-sm text-yellow-800 dark:text-yellow-200"}," Não feche esta janela durante o processamento ",-1))])])])):Q("",!0)]),_:1}),b(Y,{name:"slide-fade",mode:"out-in"},{default:P(()=>[e.value==="completed"?(k(),D("div",mt,[u("div",gt,[u("div",pt,[u("div",wt,[b(w(re),{class:"w-12 h-12 text-white animate-pulse"})]),n[23]||(n[23]=u("div",{class:"absolute inset-0 w-24 h-24 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full animate-ping opacity-20"},null,-1))]),n[24]||(n[24]=u("div",null,[u("h2",{class:"text-xl font-bold text-green-600 dark:text-green-400"}," Pagamento Concluído! "),u("p",{class:"text-sm text-muted-foreground mt-1"}," O pagamento foi processado com sucesso ")],-1))]),u("div",Ct,[u("div",bt,[u("div",yt,[n[25]||(n[25]=u("span",{class:"text-sm text-muted-foreground"},"Valor recebido:",-1)),u("span",Et,G(g(m.value.netAmount)),1)]),u("div",xt,[n[26]||(n[26]=u("span",{class:"text-sm text-muted-foreground"},"Data/Hora:",-1)),u("span",_t,G(new Date().toLocaleString("pt-BR")),1)]),n[27]||(n[27]=u("div",{class:"flex justify-between items-center"},[u("span",{class:"text-sm text-muted-foreground"},"Método:"),u("span",{class:"text-sm font-medium"},"PIX")],-1))])]),u("div",Mt,[b(w(ae),{"as-child":""},{default:P(()=>[b(w(V),{class:"w-full h-12 text-base",onClick:y},{default:P(()=>[b(w(ke),{class:"w-5 h-5 mr-2"}),n[28]||(n[28]=B(" Ver Transação "))]),_:1})]),_:1})])])):Q("",!0)]),_:1})])):Q("",!0)]),_:1})]),_:3})]))}};export{Kt as default};
