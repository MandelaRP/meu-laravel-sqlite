import{k as J,H as $,r as h,w as z,c,o as i,d as b,e as g,I as K,F as Q,g as R,A as W,G as X,a as m,b as V,f as S,t as C,u as d,h as j,j as Y,i as F,v as Z}from"./app-rxSkm_8n.js";import{_ as ee}from"./Input.vue_vue_type_script_setup_true_lang-DYiRcBo-.js";import{_ as te}from"./Button.vue_vue_type_script_setup_true_lang-CZrugS0B.js";import{_ as re}from"./Label.vue_vue_type_script_setup_true_lang-oy-9Lx9Q.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{L as I}from"./loader-circle-Dpydm2ko.js";import{C as oe}from"./circle-check-big-CYSTrOyz.js";import{C as P}from"./circle-alert-B6SM_-WU.js";import{U as B}from"./user-BzOG761P.js";import{M as ae}from"./mail-DQ1qAuTh.js";import{c as A}from"./createLucideIcon-C3bDf7p4.js";import{M as ie}from"./map-pin-DVa-zxe0.js";import{C as ne}from"./credit-card-DPATrQHH.js";import{P as le}from"./plus-C42tnu2a.js";import"./utils-CytzSlOG.js";import"./index-CNtfqitb.js";import"./Primitive-BrnKrBYL.js";import"./index-XW9fu56b.js";import"./floating-ui.vue-CZZPkfLm.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=A("PhoneIcon",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=A("PinIcon",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]),de={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},me={key:0,class:"text-red-500 ml-1"},pe={class:"relative"},fe={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},ve={key:0,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},he={class:"flex items-center gap-2"},be={key:1,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},ge={key:2,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},ye={key:0,class:"text-red-500 text-sm mt-1 flex items-center gap-1"},_e={key:0},we={__name:"Form",props:{form:Object,showSubmitButton:{type:Boolean,default:!0}},emits:["form-submitted","form-data-changed","submit-clicked"],setup(D,{expose:M,emit:O}){const p=D,y=O,_=J(()=>Object.entries(p.form).map(([e,r])=>({key:e,...r})).filter(e=>e.visible!==!1).sort((e,r)=>(e.order||0)-(r.order||0)));(!p.form||typeof p.form!="object")&&console.warn("Form.vue: props.form não é um objeto válido",p.form);const o=$(Object.keys(p.form||{}).reduce((e,r)=>(e[r]="",e),{})),v=h(!1),n=h(!1),u=h(""),s=$({}),f=h(!1);z(()=>p.form,e=>{!e||typeof e!="object"||Object.keys(e).forEach(r=>{(!(r in s)||typeof s[r]!="string")&&(s[r]="")})},{immediate:!0,deep:!0});const L=e=>e.includes("email")?"email":(e.includes("cpf")||e.includes("zip")||e.includes("phone"),"text"),q=e=>e.includes("name")||e.includes("nome")?B:e.includes("email")?ae:e.includes("phone")||e.includes("telefone")?ce:e.includes("zip")||e.includes("address")||e.includes("endereco")?ie:e.includes("card")||e.includes("payment")?ne:e.includes("number")?ue:e.includes("complement")?le:B,N=(e,r)=>r.includes("phone")||r.includes("telefone")?e.replace(/\D/g,"").replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):r.includes("cpf")?e.replace(/\D/g,"").replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):r.includes("zip")||r.includes("cep")?e.replace(/\D/g,"").replace(/(\d{5})(\d{3})/,"$1-$2"):e,T=e=>["address","city","state","number","complement"].includes(e),U=e=>e.visible===!1?!1:T(e.key)?f.value:!0,H=async()=>{const e=o.zip_code.replace(/\D/g,"");if(u.value="",s.zip_code="",o.address="",o.number="",o.complement="",o.city="",o.state="",f.value=!1,e.length===8){v.value=!0;try{const t=await(await fetch(`https://viacep.com.br/ws/${e}/json/`)).json();t.erro?(u.value="CEP não encontrado.",s.zip_code="CEP não encontrado.",f.value=!1):(o.address=t.logradouro||"",o.city=t.localidade||"",o.state=t.uf||"",u.value="",s.zip_code="",f.value=!0)}catch(r){console.log(r),u.value="Erro ao buscar o CEP.",s.zip_code="Erro ao buscar o CEP.",f.value=!1}finally{v.value=!1}}};z(()=>o.zip_code,e=>{e&&e.replace(/\D/g,"").length===8?H():(u.value="",s&&typeof s=="object"&&(s.zip_code=""),f.value=!1)}),z(o,e=>{y("form-data-changed",{formData:e,hasErrors:!1,timestamp:new Date().toISOString()})},{deep:!0});const a=h(!1),w=(e,r)=>{if(!s||typeof s!="object")return!0;(!(e in s)||typeof s[e]!="string")&&(s[e]="");const t=_.value.find(l=>l.key===e);return!t||!t.required?(a.value&&(s[e]=""),!0):a.value?!r||typeof r=="string"&&r.trim()===""?(s[e]="Este campo é obrigatório.",!1):e.includes("email")&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)?(s[e]="Email inválido.",!1):e.includes("phone")&&r.replace(/\D/g,"").length<10?(s[e]="Telefone inválido.",!1):(s[e]="",!0):!0},E=()=>{let e=!0;return _.value.forEach(r=>{if(r.required){const t=o[r.key];(!t||t.trim()===""||r.key.includes("email")&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||r.key.includes("phone")&&t.replace(/\D/g,"").length<10)&&(e=!1)}}),e},k=()=>{a.value=!0;let e=!0;return _.value.forEach(r=>{r.required&&!w(r.key,o[r.key])&&(e=!1)}),e},x=async()=>{a.value=!0,y("submit-clicked",{formData:o,isValid:k(),timestamp:new Date().toISOString()}),n.value=!0;const e=k();if(!e){n.value=!1;return}try{await new Promise(r=>setTimeout(r,2e3)),console.log("Dados enviados:",o),y("form-submitted",{formData:o,isValid:e,timestamp:new Date().toISOString()})}catch(r){console.error("Erro ao enviar formulário:",r),y("form-submitted",{formData:o,isValid:!1,error:r.message,timestamp:new Date().toISOString()})}finally{n.value=!1}};return M({formData:o,validateForm:k,checkFormValidity:E,isSubmitting:n,formErrors:s,submitForm:x}),(e,r)=>(i(),c("form",{onSubmit:Z(x,["prevent"]),class:"space-y-6"},[b("div",de,[(i(!0),c(Q,null,R(_.value,t=>W((i(),c("div",{key:t.key,class:"relative"},[m(d(re),{for:t.key,class:"text-sm font-medium mb-2 block",style:{color:"inherit"}},{default:V(()=>[S(C(t.label)+" ",1),t.required===!0?(i(),c("span",me,"*")):g("",!0)]),_:2},1032,["for"]),b("div",pe,[b("div",fe,[(i(),j(Y(q(t.key)),{class:"h-5 w-5 opacity-60"}))]),m(d(ee),{modelValue:o[t.key],"onUpdate:modelValue":l=>o[t.key]=l,type:L(t.key),id:t.key,disabled:t.key==="zip_code"&&v.value,placeholder:t.placeholder||`Digite seu ${t.label.toLowerCase()}`,class:F(["pl-10 h-12 transition-all duration-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 rounded-xl bg-white border-gray-200",{"border-red-500 focus:ring-red-500 focus:border-red-500":a.value&&(s[t.key]||t.key==="zip_code"&&u.value),"border-green-500 focus:ring-green-500 focus:border-green-500":o[t.key]&&(!a.value||!s[t.key]),"opacity-50 cursor-not-allowed bg-gray-50":t.key==="zip_code"&&v.value}]),onInput:l=>{try{(t.key.includes("phone")||t.key.includes("cpf")||t.key.includes("zip"))&&(l.target.value=N(l.target.value,t.key)),a.value&&typeof a.value=="object"&&a.value.value&&w(t.key,l.target.value)}catch(G){console.error("Erro no input handler:",G)}},onBlur:()=>{try{a.value&&typeof a.value=="object"&&a.value.value&&w(t.key,o[t.key])}catch(l){console.error("Erro no blur handler:",l)}}},null,8,["modelValue","onUpdate:modelValue","type","id","disabled","placeholder","class","onInput","onBlur"]),t.key==="zip_code"&&v.value?(i(),c("div",ve,[b("div",he,[m(d(I),{class:"h-5 w-5 text-blue-500 animate-spin"}),r[0]||(r[0]=b("span",{class:"text-xs text-blue-500 font-medium"},"Buscando...",-1))])])):o[t.key]&&!s[t.key]?(i(),c("div",be,[m(d(oe),{class:"h-5 w-5 text-green-500"})])):a.value&&s[t.key]?(i(),c("div",ge,[m(d(P),{class:"h-5 w-5 text-red-500"})])):g("",!0)]),a.value&&(s[t.key]||t.key==="zip_code"&&u.value)?(i(),c("p",ye,[m(d(P),{class:"h-4 w-4"}),S(" "+C(s[t.key]||u.value),1)])):g("",!0)])),[[X,U(t)]])),128))]),D.showSubmitButton?(i(),c("div",_e,[m(d(te),{type:"submit",disabled:n.value,class:F(["w-full h-12 text-lg font-semibold transition-all duration-200",{"bg-blue-600 hover:bg-blue-700":!n.value,"bg-gray-400 cursor-not-allowed":n.value}])},{default:V(()=>[n.value?(i(),j(d(I),{key:0,class:"mr-2 h-5 w-5 animate-spin"})):g("",!0),S(" "+C(n.value?"Processando...":"Finalizar Compra"),1)]),_:1},8,["disabled","class"])])):g("",!0),K(e.$slots,"submit-button",{formData:o,isValid:E(),isSubmitting:n.value,handleSubmit:x},void 0,!0)],32))}},Ne=se(we,[["__scopeId","data-v-26344087"]]);export{Ne as default};
