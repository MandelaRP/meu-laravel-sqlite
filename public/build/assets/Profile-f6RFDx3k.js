import{z as J,n as L,r as $,C as z,w as O,k as R,h as _,o as d,b as m,a as i,u as t,m as H,d as s,c as g,e as y,f as p,t as v,P as K}from"./app-S3kx2b0d.js";import{_ as w}from"./InputError.vue_vue_type_script_setup_true_lang-BOvJqWDT.js";import{_ as k}from"./Button.vue_vue_type_script_setup_true_lang-Bu1_OuLZ.js";import{_ as C}from"./Input.vue_vue_type_script_setup_true_lang-Zo94wQZG.js";import{_ as h}from"./Label.vue_vue_type_script_setup_true_lang-Y6gPyrr0.js";import{h as A,j as D,i as M,u as Q,_ as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-CrF1FF1Y.js";import{_ as Y}from"./Layout.vue_vue_type_script_setup_true_lang-DsaN9KHi.js";import{S as Z}from"./square-pen-BmZ5A-jv.js";import{c as ee}from"./createLucideIcon-B4R1MoSR.js";import{S as te}from"./transition-DRaCgiiA.js";import"./Primitive-odI4fKTA.js";import"./utils-CytzSlOG.js";import"./index-BszNJtDQ.js";import"./index-BGfks83y.js";import"./floating-ui.vue-Bsqwf4g4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./x-Dj8XHr1q.js";import"./wallet-W4yJT2z-.js";import"./credit-card-LFa5ma_M.js";import"./package-q04n0eFj.js";import"./shopping-cart-SOVwChfQ.js";import"./users-C6A098f4.js";import"./building-2-BRWwAQkA.js";import"./chevron-right-BTpdya_p.js";import"./useForwardExpose-BFkC9Kdc.js";import"./nullish-CHIgUVhi.js";import"./user-Bs-aP_A5.js";import"./Separator.vue_vue_type_script_setup_true_lang-CJQNhXNV.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=ee("CameraIcon",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),oe=o=>o?(o=o.replace(/\D/g,""),o=o.replace(/(\d{2})(\d)/,"($1) $2"),o=o.replace(/(\d{5})(\d)/,"$1-$2"),o=o.replace(/(-\d{4})\d+?$/,"$1"),o):"",se=o=>o?(o=o.replace(/\D/g,""),o=o.replace(/(\d{3})(\d)/,"$1.$2"),o=o.replace(/(\d{3})(\d)/,"$1.$2"),o=o.replace(/(\d{3})(\d{1,2})$/,"$1-$2"),o=o.replace(/(-\d{2})\d+?$/,"$1"),o):"",re={class:"flex flex-col space-y-6"},le={class:"flex items-center justify-between"},ne={key:1,class:"flex gap-2"},ie={class:"rounded-lg border bg-card p-8 shadow-sm"},de={class:"grid gap-8 lg:grid-cols-[180px_1fr]"},ue={class:"flex flex-col items-center space-y-3"},me={class:"relative"},ce={class:"absolute inset-0 flex items-center justify-center rounded-full bg-black/50 transition-opacity hover:bg-black/70"},fe={key:1},pe={class:"text-center"},ge={key:1,class:"text-sm font-medium text-foreground"},ve={class:"space-y-5 max-w-2xl"},_e={class:"grid gap-2"},he={key:1,class:"flex h-10 w-full items-center rounded-md border border-input bg-muted/50 px-3 text-sm"},xe={class:"grid grid-cols-2 gap-4"},be={class:"grid gap-2"},ye={class:"flex h-10 w-full items-center rounded-md border border-input bg-muted/80 px-3 text-sm text-muted-foreground opacity-60 cursor-not-allowed"},$e={class:"grid gap-2"},we={key:1,class:"flex h-10 w-full items-center rounded-md border border-input bg-muted/50 px-3 text-sm"},ke={class:"grid gap-2"},Ce={class:"flex h-10 w-full items-center rounded-md border border-input bg-muted/80 px-3 text-sm text-muted-foreground opacity-60 cursor-not-allowed"},Pe={class:"grid gap-2"},Ee={key:1,class:"flex h-10 w-full items-center rounded-md border border-input bg-muted/50 px-3 text-sm"},Ve={key:0,class:"rounded-lg border border-yellow-200 bg-yellow-50 p-4 dark:border-yellow-800 dark:bg-yellow-900/20"},je={class:"text-sm text-yellow-800 dark:text-yellow-200"},Ne={key:0,class:"mt-2 text-sm font-medium text-green-600 dark:text-green-400"},rt=J({__name:"Profile",props:{mustVerifyEmail:{type:Boolean},status:{},className:{}},setup(o){const T=[{title:"Meu perfil",href:"/settings/profile"}],P=L(),r=P.props.auth.user,{getInitials:E}=Q(),f=$(!1),x=$(null),c=$(r.avatar||null),n=z({name:r.name,full_name:r.full_name||"",document:r.document||"",phone:r.phone||"",avatar:null});O(()=>P.props.auth.user,a=>{a&&a.avatar&&(c.value=a.avatar)},{deep:!0});const q=a=>{if(!a)return"";const e=a.replace(/\D/g,"");return e.length===11?se(a):e.length===14?a.replace(/\D/g,"").replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):a},B=a=>a?oe(a):"",I=a=>a==="pf"?"Pessoa Física":a==="pj"?"Pessoa Jurídica":a||"Não informado",V=()=>{f.value=!f.value,f.value||(n.name=r.name,n.full_name=r.full_name||"",n.document=r.document||"",n.phone=r.phone||"",n.avatar=null,n.clearErrors(),x.value=null,c.value=r.avatar||null)},G=a=>{var F;const e=a.target,l=(F=e.files)==null?void 0:F[0];if(!l)return;if(l.size>2*1024*1024){alert("Arquivo muito grande. Tamanho máximo: 2MB"),e.value="";return}if(!["image/png","image/jpeg","image/jpg","image/gif"].includes(l.type)){alert("Tipo de arquivo inválido. Use PNG, JPG ou GIF"),e.value="";return}x.value=l,n.avatar=l;const N=new FileReader;N.onload=W=>{var S;c.value=(S=W.target)==null?void 0:S.result},N.readAsDataURL(l)},j=()=>{if(f.value){const a=document.getElementById("avatar-upload");a&&a.click()}},U=()=>{n.avatar instanceof File?n.post(route("profile.update"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{f.value=!1,x.value=null,c.value=null,window.location.reload()},onError:e=>{if(console.error("Erro ao salvar:",e),e&&typeof e=="object"){const l=[];Object.keys(e).forEach(u=>{e[u]&&Array.isArray(e[u])?l.push(`${u}: ${e[u][0]}`):typeof e[u]=="string"&&l.push(`${u}: ${e[u]}`)}),l.length>0?alert(`Erro ao salvar:
`+l.join(`
`)):alert("Erro ao salvar. Verifique o console para mais detalhes.")}}}):n.patch(route("profile.update"),{preserveScroll:!0,onSuccess:()=>{f.value=!1,x.value=null},onError:e=>{if(console.error("Erro ao salvar:",e),e&&typeof e=="object"){const l=[];Object.keys(e).forEach(u=>{e[u]&&Array.isArray(e[u])?l.push(`${u}: ${e[u][0]}`):typeof e[u]=="string"&&l.push(`${u}: ${e[u]}`)}),l.length>0&&alert(`Erro ao salvar:
`+l.join(`
`))}}})},b=R(()=>c.value&&c.value.startsWith("data:")?c.value:c.value?c.value.startsWith("http://")||c.value.startsWith("https://")||c.value.startsWith("/storage/")?c.value:`/storage/${c.value}`:null);return(a,e)=>(d(),_(X,{breadcrumbs:T},{default:m(()=>[i(t(H),{title:"Meu perfil"}),i(Y,null,{default:m(()=>[s("div",re,[s("div",le,[e[6]||(e[6]=s("h2",{class:"text-2xl font-semibold tracking-tight"},"Meu perfil",-1)),f.value?(d(),g("div",ne,[i(t(k),{variant:"outline",onClick:V},{default:m(()=>e[4]||(e[4]=[p("Cancelar")])),_:1}),i(t(k),{onClick:U,disabled:t(n).processing},{default:m(()=>e[5]||(e[5]=[p("Salvar")])),_:1},8,["disabled"])])):(d(),_(t(k),{key:0,variant:"outline",onClick:V,class:"gap-2"},{default:m(()=>[i(t(Z),{class:"h-4 w-4"}),e[3]||(e[3]=p(" Editar perfil "))]),_:1}))]),s("div",ie,[e[12]||(e[12]=s("h3",{class:"mb-8 text-lg font-semibold"},"Dados gerais",-1)),s("div",de,[s("div",ue,[s("div",me,[f.value?(d(),g("div",{key:0,onClick:j,class:"relative cursor-pointer"},[i(t(A),{class:"h-32 w-32 overflow-hidden rounded-full ring-2 ring-border transition-opacity hover:opacity-80"},{default:m(()=>[b.value?(d(),_(t(D),{key:0,src:b.value,alt:t(r).name},null,8,["src","alt"])):y("",!0),i(t(M),{class:"rounded-full bg-muted text-2xl font-semibold"},{default:m(()=>[p(v(t(E)(t(r).name)),1)]),_:1})]),_:1}),s("div",ce,[i(t(ae),{class:"h-8 w-8 text-white"})])])):(d(),g("div",fe,[i(t(A),{class:"h-32 w-32 overflow-hidden rounded-full ring-2 ring-border"},{default:m(()=>[b.value?(d(),_(t(D),{key:0,src:b.value,alt:t(r).name},null,8,["src","alt"])):y("",!0),i(t(M),{class:"rounded-full bg-muted text-2xl font-semibold"},{default:m(()=>[p(v(t(E)(t(r).name)),1)]),_:1})]),_:1})]))]),s("input",{type:"file",accept:"image/png,image/jpeg,image/jpg,image/gif",onChange:G,class:"hidden",id:"avatar-upload"},null,32),s("div",pe,[f.value?(d(),g("p",{key:0,class:"text-sm font-medium text-foreground cursor-pointer hover:text-primary",onClick:j}," Clique para alterar ")):(d(),g("p",ge,"Foto do perfil")),e[7]||(e[7]=s("p",{class:"mt-1 text-xs text-muted-foreground"}," PNG, JPG ou GIF (Max. 2MB) ",-1))])]),s("div",ve,[s("div",_e,[i(t(h),{for:"full_name",class:"text-sm font-medium"},{default:m(()=>e[8]||(e[8]=[p("Nome completo")])),_:1}),f.value?(d(),_(t(C),{key:0,id:"full_name",modelValue:t(n).full_name,"onUpdate:modelValue":e[0]||(e[0]=l=>t(n).full_name=l),placeholder:"Nome completo",class:"h-10 w-full"},null,8,["modelValue"])):(d(),g("div",he,v(t(r).full_name||"Não informado"),1)),i(w,{class:"mt-1",message:t(n).errors.full_name},null,8,["message"])]),s("div",xe,[s("div",be,[i(t(h),{for:"person_type",class:"text-sm font-medium"},{default:m(()=>e[9]||(e[9]=[p("Tipo de Pessoa")])),_:1}),s("div",ye,v(I(t(r).person_type)),1)]),s("div",$e,[i(t(h),{for:"document",class:"text-sm font-medium"},{default:m(()=>[p(v(t(r).person_type==="pj"?"CNPJ":"CPF"),1)]),_:1}),f.value?(d(),_(t(C),{key:0,id:"document",modelValue:t(n).document,"onUpdate:modelValue":e[1]||(e[1]=l=>t(n).document=l),placeholder:t(r).person_type==="pj"?"CNPJ":"CPF",class:"h-10 w-full"},null,8,["modelValue","placeholder"])):(d(),g("div",we,v(q(t(r).document)||"Não informado"),1)),i(w,{class:"mt-1",message:t(n).errors.document},null,8,["message"])])]),s("div",ke,[i(t(h),{for:"email",class:"text-sm font-medium"},{default:m(()=>e[10]||(e[10]=[p("E-mail")])),_:1}),s("div",Ce,v(t(r).email),1)]),s("div",Pe,[i(t(h),{for:"phone",class:"text-sm font-medium"},{default:m(()=>e[11]||(e[11]=[p("WhatsApp")])),_:1}),f.value?(d(),_(t(C),{key:0,id:"phone",modelValue:t(n).phone,"onUpdate:modelValue":e[2]||(e[2]=l=>t(n).phone=l),placeholder:"WhatsApp",class:"h-10 w-full"},null,8,["modelValue"])):(d(),g("div",Ee,v(B(t(r).phone)||"Não informado"),1)),i(w,{class:"mt-1",message:t(n).errors.phone},null,8,["message"])])])])]),a.mustVerifyEmail&&!t(r).email_verified_at&&!f.value?(d(),g("div",Ve,[s("p",je,[e[14]||(e[14]=p(" Seu endereço de e-mail não foi verificado. ")),i(t(K),{href:a.route("verification.send"),method:"post",as:"button",class:"ml-1 font-medium underline hover:no-underline"},{default:m(()=>e[13]||(e[13]=[p(" Clique aqui para reenviar o e-mail de verificação. ")])),_:1},8,["href"])]),a.status==="verification-link-sent"?(d(),g("div",Ne," Um novo link de verificação foi enviado para seu endereço de e-mail. ")):y("",!0)])):y("",!0),i(t(te),{show:t(n).recentlySuccessful,enter:"transition ease-in-out","enter-from":"opacity-0",leave:"transition ease-in-out","leave-to":"opacity-0"},{default:m(()=>e[15]||(e[15]=[s("div",{class:"rounded-lg border border-green-200 bg-green-50 p-4 dark:border-green-800 dark:bg-green-900/20"},[s("p",{class:"text-sm font-medium text-green-800 dark:text-green-200"},"Salvo com sucesso.")],-1)])),_:1},8,["show"])])]),_:1})]),_:1}))}});export{rt as default};
