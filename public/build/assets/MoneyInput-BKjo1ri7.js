import{X as S}from"./index-BGfks83y.js";import{z as N,h,o as m,b as v,I as C,Q as K,R as _,u as V,r as y,l as E,k as T,c as A,e as I,d as L,f as P,t as R,i as z,F as $}from"./app-S3kx2b0d.js";import{_ as M}from"./Label.vue_vue_type_script_setup_true_lang-Y6gPyrr0.js";const U=N({__name:"DialogClose",props:{asChild:{type:Boolean},as:{}},setup(a){const d=a;return(s,i)=>(m(),h(V(S),K(_(d)),{default:v(()=>[C(s.$slots,"default")]),_:3},16))}}),O=["value","placeholder","id"],j={__name:"MoneyInput",props:{modelValue:{type:[Number,String],default:null},placeholder:{type:String,default:"0,00"},class:{type:String,default:""},error:{type:String,default:null},label:{type:String,default:""},hideLabel:{type:Boolean,default:!1},id:{type:String,default:""}},emits:["update:modelValue"],setup(a,{emit:d}){const s=a,i=d,o=y(""),p=y(!1),g=e=>{if(e==null||e===""||e===0)return"";const t=typeof e=="string"?parseFloat(e):e;return isNaN(t)||t===0?"":t.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})},b=e=>{if(!e||e.trim()==="")return 0;let t=e.replace(/[^\d,\.]/g,"").trim();if(!t)return 0;t.includes(",")&&(t=t.replace(/\./g,"").replace(",","."));const l=parseFloat(t);return isNaN(l)?0:l};let r=null;const x=e=>{let l=e.target.value.replace(/[^\d,\.]/g,"");const c=l.indexOf(",");if(c>=0){const n=l.substring(0,c+1),u=l.substring(c+1).replace(/,/g,"");l=n+(u.length>2?u.substring(0,2):u)}else{const n=l.indexOf(".");if(n>=0){const u=l.substring(0,n+1),f=l.substring(n+1).replace(/\./g,"");l=u+(f.length>2?f.substring(0,2):f)}}o.value=l,r&&clearTimeout(r),r=setTimeout(()=>{const n=b(l);i("update:modelValue",n),r=null},50)},w=()=>{r&&(clearTimeout(r),r=null);const e=b(o.value);if(e>0){const t=parseFloat(e.toFixed(2));o.value=g(t),i("update:modelValue",t)}else o.value="",i("update:modelValue",0)},B=e=>{e.ctrlKey||e.metaKey||e.altKey||["Backspace","Delete","Tab","Escape","Enter","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(e.key)||/[\d,\.]/.test(e.key)||e.preventDefault()},F=()=>{p.value=!0},k=()=>{p.value=!1,w()};E(()=>{s.modelValue!==null&&s.modelValue!==void 0&&s.modelValue!==""&&s.modelValue!==0?o.value=g(s.modelValue):o.value=""});const D=T(()=>{let e=s.class||"";return s.error&&(e+=" border-destructive focus:border-destructive focus:ring-destructive"),e});return(e,t)=>(m(),A($,null,[!a.hideLabel&&a.label?(m(),h(V(M),{key:0,for:a.id||"money",class:"text-sm font-medium"},{default:v(()=>[P(R(a.label),1)]),_:1},8,["for"])):I("",!0),L("input",{type:"text",inputmode:"decimal",value:o.value,onInput:x,onKeydown:B,onFocus:F,onBlur:k,placeholder:a.placeholder,class:z([D.value,"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm h-10 sm:h-9 text-sm"]),id:a.id||"money"},null,42,O)],64))}};export{j as _,U as a};
