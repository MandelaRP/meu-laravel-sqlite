import{_ as m}from"./Button.vue_vue_type_script_setup_true_lang-Bu1_OuLZ.js";import{U as y}from"./upload-DS4P8H_v.js";import{X as F}from"./x-Dj8XHr1q.js";import{r as _,k as V,w as b,c as p,o as f,d as u,a as s,u as r,t as v,b as g,f as x}from"./app-S3kx2b0d.js";const I={class:"space-y-4"},U=["accept"],P={key:0,class:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-4 sm:p-6"},R={class:"flex flex-col items-center gap-2 text-center"},A={class:"text-xs sm:text-sm text-muted-foreground"},B={key:1,class:"space-y-3"},D={class:"relative inline-block"},L=["src","alt"],j={__name:"ImageUpload",props:{modelValue:{type:[File,String,null],default:null},preview:{type:String,default:null},label:{type:String,default:"Imagem"},placeholder:{type:String,default:"Clique para fazer upload ou arraste uma imagem"},accept:{type:String,default:"image/*"},maxSize:{type:Number,default:2048}},emits:["update:modelValue","update:preview"],setup(i,{emit:k}){const t=i,d=k,o=_(null),a=_(null),z=V(()=>a.value!==null),n=e=>e&&typeof e=="string"?e.startsWith("http://")||e.startsWith("https://")||e.startsWith("/storage/")?e:`/storage/${e}`:null;(()=>{if(t.modelValue instanceof File){const e=new FileReader;e.onload=l=>{a.value=l.target.result},e.readAsDataURL(t.modelValue)}else t.modelValue&&typeof t.modelValue=="string"?a.value=n(t.modelValue):t.preview?a.value=n(t.preview):a.value=null})();const S=e=>{const l=e.target.files[0];if(l){if(l.size>t.maxSize*1024){alert(`Arquivo muito grande. Tamanho mÃ¡ximo: ${t.maxSize}KB`);return}if(!l.type.startsWith("image/")){alert("Por favor, selecione apenas arquivos de imagem.");return}d("update:modelValue",l);const c=new FileReader;c.onload=w=>{a.value=w.target.result,d("update:preview",w.target.result)},c.readAsDataURL(l)}},C=()=>{d("update:modelValue",null),a.value=null,d("update:preview",null),o.value&&(o.value.value="")},h=()=>{o.value&&o.value.click()};return b(()=>t.modelValue,e=>{if(e instanceof File){const l=new FileReader;l.onload=c=>{a.value=c.target.result},l.readAsDataURL(e)}else e&&typeof e=="string"?a.value=n(e):e==null&&t.preview?a.value=n(t.preview):a.value=null},{immediate:!0}),b(()=>t.preview,e=>{e&&(!t.modelValue||t.modelValue===null)&&(a.value=n(e))},{immediate:!0}),(e,l)=>(f(),p("div",I,[u("input",{ref_key:"fileInput",ref:o,type:"file",accept:i.accept,onChange:S,class:"hidden"},null,40,U),z.value?(f(),p("div",B,[u("div",D,[u("img",{src:a.value,alt:`Preview da ${i.label.toLowerCase()}`,class:"w-full h-32 sm:h-40 object-cover rounded-lg border"},null,8,L),s(r(m),{type:"button",variant:"destructive",size:"sm",class:"absolute -top-2 -right-2 h-6 w-6 p-0",onClick:C},{default:g(()=>[s(r(F),{class:"h-3 w-3"})]),_:1})]),s(r(m),{type:"button",variant:"outline",size:"sm",onClick:h},{default:g(()=>[s(r(y),{class:"h-4 w-4 mr-2"}),x(" Trocar "+v(i.label),1)]),_:1})])):(f(),p("div",P,[u("div",R,[s(r(y),{class:"h-6 w-6 sm:h-8 sm:w-8 text-muted-foreground"}),u("div",A,v(i.placeholder),1),s(r(m),{type:"button",variant:"outline",size:"sm",onClick:h,class:"mt-2"},{default:g(()=>[x(" Selecionar "+v(i.label),1)]),_:1})])]))]))}};export{j as _};
