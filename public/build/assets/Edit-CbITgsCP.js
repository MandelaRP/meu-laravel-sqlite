import{C,r as y,c as m,o as u,a as o,u as e,m as F,b as a,d as l,f as d,v as E,e as c,i as g,t as n,F as z}from"./app-rxSkm_8n.js";import{_ as A}from"./AppLayout.vue_vue_type_script_setup_true_lang-BwOLDhhL.js";import{_ as V}from"./Button.vue_vue_type_script_setup_true_lang-CZrugS0B.js";import{_ as $}from"./Input.vue_vue_type_script_setup_true_lang-DYiRcBo-.js";import{_ as f}from"./Label.vue_vue_type_script_setup_true_lang-oy-9Lx9Q.js";import{_ as N}from"./Textarea-CuPciTN4.js";import{_ as T,a as U,b as q,c as B,d as w}from"./SelectValue.vue_vue_type_script_setup_true_lang-2pPvREZz.js";import{_ as L,a as j}from"./CardContent.vue_vue_type_script_setup_true_lang-t8QW7drv.js";import{_ as G}from"./CardDescription.vue_vue_type_script_setup_true_lang-C3akIHir.js";import{_ as O,a as R}from"./CardTitle.vue_vue_type_script_setup_true_lang-D-Ey-PXk.js";import{_ as M}from"./ImageUpload-ogP-Jy7q.js";import{l as _}from"./index-DjQHJRhy.js";import{P as H}from"./package-B8fsICZ3.js";import"./utils-CytzSlOG.js";import"./index-CNtfqitb.js";import"./index-XW9fu56b.js";import"./floating-ui.vue-CZZPkfLm.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./x-3FGPxMN9.js";import"./createLucideIcon-C3bDf7p4.js";import"./wallet-xIOSN7AQ.js";import"./credit-card-DPATrQHH.js";import"./shopping-cart-CIHs1TUy.js";import"./users-CTj-7I4Q.js";import"./building-2-Bs7tmiXJ.js";import"./chevron-right-CuoNnNmV.js";import"./useForwardExpose-DMzqEU9f.js";import"./nullish-CHIgUVhi.js";import"./Primitive-BrnKrBYL.js";import"./user-BzOG761P.js";import"./VisuallyHidden-BSu4F0qb.js";import"./Collection-DhgCJFi0.js";import"./useId-twxlRIXh.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./check-DXIJwO3F.js";import"./utils-pWec8FuC.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./useFormControl-BXJ2ZBjh.js";import"./upload-vBmHZAro.js";const J={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 w-full max-w-3xl mx-auto"},K={class:"space-y-2"},Q={key:0,class:"text-sm text-destructive"},W={class:"space-y-2"},X={key:0,class:"text-sm text-destructive"},Y={class:"space-y-2"},Z={key:0,class:"text-sm text-destructive"},h={class:"space-y-2"},ee={class:"relative"},te={key:0,class:"text-sm text-destructive"},re={class:"space-y-2"},oe={key:0,class:"text-sm text-destructive"},se={class:"flex flex-col sm:flex-row gap-3 pt-4 border-t"},Me={__name:"Edit",props:{product:{type:Object,required:!0}},setup(b){const p=b,P=[{title:"Dashboard",href:"/dashboard"},{title:"Produtos",href:"/seller/products"},{title:"Editar Produto",href:`/seller/products/${p.product.id}/edit`}],r=C({name:p.product.name||"",description:p.product.description||"",type:p.product.type||"DIGITAL",price:p.product.price?parseFloat(p.product.price).toFixed(2).replace(".",","):"",image:null,_method:"POST"}),I=()=>{const i=r.price?parseFloat(r.price.toString().replace(",",".")):0;if(isNaN(i)||i<0){_.error("Por favor, insira um preço válido");return}const t={name:r.name,description:r.description,type:r.type,price:i};r.image instanceof File?t.image=r.image:x.value&&p.product.image&&(t.image="remove"),r.transform(()=>t).post(route("products.update",p.product.id),{preserveScroll:!0,onSuccess:()=>{_.success("Produto atualizado com sucesso!")},onError:s=>{s.message?_.error(s.message):s.price?_.error(s.price[0]||"Erro ao validar preço"):_.error("Erro ao atualizar produto. Verifique os campos.")}})},S=i=>{if(!i)return"";let t=i.toString().replace(/[^\d,.]/g,"");if(!t)return"";t=t.replace(",",".");const s=t.split(".");return s.length>2&&(t=s[0]+"."+s.slice(1).join("")),s.length===2&&s[1].length>2&&(t=s[0]+"."+s[1].substring(0,2)),t.replace(".",",")},D=i=>{const t=S(i.target.value);r.price=t},x=y(!1),v=y(!1),k=i=>{v.value&&i===null&&p.product.image?x.value=!0:i instanceof File?(x.value=!1,v.value=!0):v.value||(v.value=!0)};return(i,t)=>(u(),m(z,null,[o(e(F),{title:"Editar Produto"}),o(A,{breadcrumbs:P},{default:a(()=>[l("div",J,[o(e(L),{class:"w-full border-border bg-card"},{default:a(()=>[o(e(O),null,{default:a(()=>[o(e(R),{class:"text-2xl font-bold text-card-foreground flex items-center gap-2"},{default:a(()=>[o(e(H),{class:"h-6 w-6"}),t[6]||(t[6]=d(" Editar Produto "))]),_:1}),o(e(G),{class:"text-base mt-1 text-muted-foreground"},{default:a(()=>t[7]||(t[7]=[d(" Atualize os dados do produto abaixo ")])),_:1})]),_:1}),o(e(j),null,{default:a(()=>[l("form",{onSubmit:E(I,["prevent"]),class:"space-y-6"},[l("div",K,[o(e(f),{for:"name"},{default:a(()=>t[8]||(t[8]=[d(" Nome do Produto "),l("span",{class:"text-destructive"},"*",-1)])),_:1}),o(e($),{id:"name",modelValue:e(r).name,"onUpdate:modelValue":t[0]||(t[0]=s=>e(r).name=s),placeholder:"Digite o nome do produto",class:g({"border-destructive":e(r).errors.name})},null,8,["modelValue","class"]),e(r).errors.name?(u(),m("p",Q,n(e(r).errors.name),1)):c("",!0)]),l("div",W,[o(e(f),{for:"description"},{default:a(()=>t[9]||(t[9]=[d("Descrição")])),_:1}),o(e(N),{id:"description",modelValue:e(r).description,"onUpdate:modelValue":t[1]||(t[1]=s=>e(r).description=s),placeholder:"Descreva seu produto ou serviço",rows:"4",class:g({"border-destructive":e(r).errors.description})},null,8,["modelValue","class"]),e(r).errors.description?(u(),m("p",X,n(e(r).errors.description),1)):c("",!0)]),l("div",Y,[o(e(f),{for:"type"},{default:a(()=>t[10]||(t[10]=[d(" Tipo "),l("span",{class:"text-destructive"},"*",-1)])),_:1}),o(e(T),{modelValue:e(r).type,"onUpdate:modelValue":t[2]||(t[2]=s=>e(r).type=s),class:g({"border-destructive":e(r).errors.type})},{default:a(()=>[o(e(U),{id:"type"},{default:a(()=>[o(e(q),{placeholder:"Selecione o tipo"})]),_:1}),o(e(B),null,{default:a(()=>[o(e(w),{value:"DIGITAL"},{default:a(()=>t[11]||(t[11]=[d("Digital")])),_:1}),o(e(w),{value:"FISICAL"},{default:a(()=>t[12]||(t[12]=[d("Físico")])),_:1})]),_:1})]),_:1},8,["modelValue","class"]),e(r).errors.type?(u(),m("p",Z,n(e(r).errors.type),1)):c("",!0)]),l("div",h,[o(e(f),{for:"price"},{default:a(()=>t[13]||(t[13]=[d(" Preço "),l("span",{class:"text-destructive"},"*",-1)])),_:1}),l("div",ee,[t[14]||(t[14]=l("span",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-sm font-semibold text-foreground"},"R$",-1)),o(e($),{id:"price",modelValue:e(r).price,"onUpdate:modelValue":t[3]||(t[3]=s=>e(r).price=s),type:"text",placeholder:"0,00",onInput:D,class:g(["pl-12",{"border-destructive":e(r).errors.price}])},null,8,["modelValue","class"])]),e(r).errors.price?(u(),m("p",te,n(Array.isArray(e(r).errors.price)?e(r).errors.price[0]:e(r).errors.price),1)):c("",!0),t[15]||(t[15]=l("p",{class:"text-xs text-muted-foreground"}," Digite o preço usando vírgula ou ponto como separador decimal (ex: 99,90 ou 99.90) ",-1))]),l("div",re,[o(e(f),null,{default:a(()=>t[16]||(t[16]=[d("Imagem do Produto")])),_:1}),o(M,{modelValue:e(r).image,"onUpdate:modelValue":[t[4]||(t[4]=s=>e(r).image=s),k],preview:b.product.image,label:"Imagem",placeholder:"Clique para fazer upload ou arraste uma imagem","max-size":5120},null,8,["modelValue","preview"]),e(r).errors.image?(u(),m("p",oe,n(e(r).errors.image),1)):c("",!0)]),l("div",se,[o(e(V),{type:"button",variant:"outline",onClick:t[5]||(t[5]=s=>i.$inertia.visit(i.route("products.index"))),class:"w-full sm:w-auto"},{default:a(()=>t[17]||(t[17]=[d(" Cancelar ")])),_:1}),o(e(V),{type:"submit",disabled:e(r).processing,class:"w-full sm:w-auto"},{default:a(()=>[d(n(e(r).processing?"Salvando...":"Salvar Alterações"),1)]),_:1},8,["disabled"])])],32)]),_:1})]),_:1})])]),_:1})],64))}};export{Me as default};
