import{z as W,n as J,r as y,C as L,w as z,k as H,h as v,o as d,b as u,a as i,u as t,m as O,d as s,c as p,e as b,f,t as g,P as R}from"./app-rxSkm_8n.js";import{_ as k}from"./InputError.vue_vue_type_script_setup_true_lang-CNY2eB66.js";import{_ as w}from"./Button.vue_vue_type_script_setup_true_lang-CZrugS0B.js";import{_ as $}from"./Input.vue_vue_type_script_setup_true_lang-DYiRcBo-.js";import{_}from"./Label.vue_vue_type_script_setup_true_lang-oy-9Lx9Q.js";import{h as S,j as A,i as T,u as K,_ as Q}from"./AppLayout.vue_vue_type_script_setup_true_lang-BwOLDhhL.js";import{_ as X}from"./Layout.vue_vue_type_script_setup_true_lang-C83dI3KW.js";import{S as Y}from"./square-pen-KuGDfjyJ.js";import{c as Z}from"./createLucideIcon-C3bDf7p4.js";import{S as ee}from"./transition-BR-JwEd1.js";import"./Primitive-BrnKrBYL.js";import"./utils-CytzSlOG.js";import"./index-CNtfqitb.js";import"./index-XW9fu56b.js";import"./floating-ui.vue-CZZPkfLm.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./x-3FGPxMN9.js";import"./wallet-xIOSN7AQ.js";import"./credit-card-DPATrQHH.js";import"./package-B8fsICZ3.js";import"./shopping-cart-CIHs1TUy.js";import"./users-CTj-7I4Q.js";import"./building-2-Bs7tmiXJ.js";import"./chevron-right-CuoNnNmV.js";import"./useForwardExpose-DMzqEU9f.js";import"./nullish-CHIgUVhi.js";import"./user-BzOG761P.js";import"./Separator.vue_vue_type_script_setup_true_lang-CsbDOS4G.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=Z("CameraIcon",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),oe=a=>a?(a=a.replace(/\D/g,""),a=a.replace(/(\d{2})(\d)/,"($1) $2"),a=a.replace(/(\d{5})(\d)/,"$1-$2"),a=a.replace(/(-\d{4})\d+?$/,"$1"),a):"",ae=a=>a?(a=a.replace(/\D/g,""),a=a.replace(/(\d{3})(\d)/,"$1.$2"),a=a.replace(/(\d{3})(\d)/,"$1.$2"),a=a.replace(/(\d{3})(\d{1,2})$/,"$1-$2"),a=a.replace(/(-\d{2})\d+?$/,"$1"),a):"",re={class:"flex flex-col space-y-6"},se={class:"flex items-center justify-between"},le={key:1,class:"flex gap-2"},ne={class:"rounded-lg border bg-card p-8 shadow-sm"},ie={class:"grid gap-8 lg:grid-cols-[180px_1fr]"},de={class:"flex flex-col items-center space-y-3"},ue={class:"relative"},me={class:"absolute inset-0 flex items-center justify-center rounded-full bg-black/50 transition-opacity hover:bg-black/70"},ce={key:1},fe={class:"text-center"},pe={key:1,class:"text-sm font-medium text-foreground"},ge={class:"space-y-5 max-w-2xl"},ve={class:"grid gap-2"},_e={key:1,class:"flex h-10 w-full items-center rounded-md border border-input bg-muted/50 px-3 text-sm"},he={class:"grid grid-cols-2 gap-4"},xe={class:"grid gap-2"},be={class:"flex h-10 w-full items-center rounded-md border border-input bg-muted/80 px-3 text-sm text-muted-foreground opacity-60 cursor-not-allowed"},ye={class:"grid gap-2"},ke={key:1,class:"flex h-10 w-full items-center rounded-md border border-input bg-muted/50 px-3 text-sm"},we={class:"grid gap-2"},$e={class:"flex h-10 w-full items-center rounded-md border border-input bg-muted/80 px-3 text-sm text-muted-foreground opacity-60 cursor-not-allowed"},Ce={class:"grid gap-2"},Pe={key:1,class:"flex h-10 w-full items-center rounded-md border border-input bg-muted/50 px-3 text-sm"},Ee={key:0,class:"rounded-lg border border-yellow-200 bg-yellow-50 p-4 dark:border-yellow-800 dark:bg-yellow-900/20"},Ve={class:"text-sm text-yellow-800 dark:text-yellow-200"},je={key:0,class:"mt-2 text-sm font-medium text-green-600 dark:text-green-400"},st=W({__name:"Profile",props:{mustVerifyEmail:{type:Boolean},status:{},className:{}},setup(a){const D=[{title:"Meu perfil",href:"/settings/profile"}],C=J(),l=C.props.auth.user,{getInitials:P}=K(),m=y(!1),h=y(null),c=y(l.avatar||null),r=L({name:l.name,full_name:l.full_name||"",document:l.document||"",phone:l.phone||"",avatar:null});z(()=>C.props.auth.user,o=>{o&&o.avatar&&(c.value=o.avatar)},{deep:!0});const B=o=>{if(!o)return"";const e=o.replace(/\D/g,"");return e.length===11?ae(o):e.length===14?o.replace(/\D/g,"").replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):o},q=o=>o?oe(o):"",I=o=>o==="pf"?"Pessoa Física":o==="pj"?"Pessoa Jurídica":o||"Não informado",E=()=>{m.value=!m.value,m.value||(r.name=l.name,r.full_name=l.full_name||"",r.document=l.document||"",r.phone=l.phone||"",r.avatar=null,r.clearErrors(),h.value=null,c.value=l.avatar||null)},M=o=>{var F;const e=o.target,n=(F=e.files)==null?void 0:F[0];if(!n)return;if(n.size>2*1024*1024){alert("Arquivo muito grande. Tamanho máximo: 2MB"),e.value="";return}if(!["image/png","image/jpeg","image/jpg","image/gif"].includes(n.type)){alert("Tipo de arquivo inválido. Use PNG, JPG ou GIF"),e.value="";return}h.value=n,r.avatar=n;const j=new FileReader;j.onload=U=>{var N;c.value=(N=U.target)==null?void 0:N.result},j.readAsDataURL(n)},V=()=>{if(m.value){const o=document.getElementById("avatar-upload");o&&o.click()}},G=()=>{const o=r.avatar instanceof File;console.log("Submit - hasFile:",o,"avatar:",r.avatar),console.log("Form data:",r.data()),console.log("Form object:",r),o?r.transform(e=>({...e,_method:"PATCH"})).post(route("profile.update"),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{console.log("Sucesso ao salvar!"),m.value=!1,h.value=null,window.location.reload()},onError:e=>{console.error("Erro ao salvar:",e),e&&typeof e=="object"&&Object.keys(e).forEach(n=>{e[n]&&Array.isArray(e[n])&&alert(`Erro em ${n}: ${e[n][0]}`)})}}):r.patch(route("profile.update"),{preserveScroll:!0,onSuccess:()=>{m.value=!1,h.value=null},onError:e=>{console.error("Erro ao salvar:",e),e&&typeof e=="object"&&Object.keys(e).forEach(n=>{e[n]&&Array.isArray(e[n])&&alert(`Erro em ${n}: ${e[n][0]}`)})}})},x=H(()=>c.value&&c.value.startsWith("data:")?c.value:c.value?c.value.startsWith("http://")||c.value.startsWith("https://")||c.value.startsWith("/storage/")?c.value:`/storage/${c.value}`:null);return(o,e)=>(d(),v(Q,{breadcrumbs:D},{default:u(()=>[i(t(O),{title:"Meu perfil"}),i(X,null,{default:u(()=>[s("div",re,[s("div",se,[e[6]||(e[6]=s("h2",{class:"text-2xl font-semibold tracking-tight"},"Meu perfil",-1)),m.value?(d(),p("div",le,[i(t(w),{variant:"outline",onClick:E},{default:u(()=>e[4]||(e[4]=[f("Cancelar")])),_:1}),i(t(w),{onClick:G,disabled:t(r).processing},{default:u(()=>e[5]||(e[5]=[f("Salvar")])),_:1},8,["disabled"])])):(d(),v(t(w),{key:0,variant:"outline",onClick:E,class:"gap-2"},{default:u(()=>[i(t(Y),{class:"h-4 w-4"}),e[3]||(e[3]=f(" Editar perfil "))]),_:1}))]),s("div",ne,[e[12]||(e[12]=s("h3",{class:"mb-8 text-lg font-semibold"},"Dados gerais",-1)),s("div",ie,[s("div",de,[s("div",ue,[m.value?(d(),p("div",{key:0,onClick:V,class:"relative cursor-pointer"},[i(t(S),{class:"h-32 w-32 overflow-hidden rounded-full ring-2 ring-border transition-opacity hover:opacity-80"},{default:u(()=>[x.value?(d(),v(t(A),{key:0,src:x.value,alt:t(l).name},null,8,["src","alt"])):b("",!0),i(t(T),{class:"rounded-full bg-muted text-2xl font-semibold"},{default:u(()=>[f(g(t(P)(t(l).name)),1)]),_:1})]),_:1}),s("div",me,[i(t(te),{class:"h-8 w-8 text-white"})])])):(d(),p("div",ce,[i(t(S),{class:"h-32 w-32 overflow-hidden rounded-full ring-2 ring-border"},{default:u(()=>[x.value?(d(),v(t(A),{key:0,src:x.value,alt:t(l).name},null,8,["src","alt"])):b("",!0),i(t(T),{class:"rounded-full bg-muted text-2xl font-semibold"},{default:u(()=>[f(g(t(P)(t(l).name)),1)]),_:1})]),_:1})]))]),s("input",{type:"file",accept:"image/png,image/jpeg,image/jpg,image/gif",onChange:M,class:"hidden",id:"avatar-upload"},null,32),s("div",fe,[m.value?(d(),p("p",{key:0,class:"text-sm font-medium text-foreground cursor-pointer hover:text-primary",onClick:V}," Clique para alterar ")):(d(),p("p",pe,"Foto do perfil")),e[7]||(e[7]=s("p",{class:"mt-1 text-xs text-muted-foreground"}," PNG, JPG ou GIF (Max. 2MB) ",-1))])]),s("div",ge,[s("div",ve,[i(t(_),{for:"full_name",class:"text-sm font-medium"},{default:u(()=>e[8]||(e[8]=[f("Nome completo")])),_:1}),m.value?(d(),v(t($),{key:0,id:"full_name",modelValue:t(r).full_name,"onUpdate:modelValue":e[0]||(e[0]=n=>t(r).full_name=n),placeholder:"Nome completo",class:"h-10 w-full"},null,8,["modelValue"])):(d(),p("div",_e,g(t(l).full_name||"Não informado"),1)),i(k,{class:"mt-1",message:t(r).errors.full_name},null,8,["message"])]),s("div",he,[s("div",xe,[i(t(_),{for:"person_type",class:"text-sm font-medium"},{default:u(()=>e[9]||(e[9]=[f("Tipo de Pessoa")])),_:1}),s("div",be,g(I(t(l).person_type)),1)]),s("div",ye,[i(t(_),{for:"document",class:"text-sm font-medium"},{default:u(()=>[f(g(t(l).person_type==="pj"?"CNPJ":"CPF"),1)]),_:1}),m.value?(d(),v(t($),{key:0,id:"document",modelValue:t(r).document,"onUpdate:modelValue":e[1]||(e[1]=n=>t(r).document=n),placeholder:t(l).person_type==="pj"?"CNPJ":"CPF",class:"h-10 w-full"},null,8,["modelValue","placeholder"])):(d(),p("div",ke,g(B(t(l).document)||"Não informado"),1)),i(k,{class:"mt-1",message:t(r).errors.document},null,8,["message"])])]),s("div",we,[i(t(_),{for:"email",class:"text-sm font-medium"},{default:u(()=>e[10]||(e[10]=[f("E-mail")])),_:1}),s("div",$e,g(t(l).email),1)]),s("div",Ce,[i(t(_),{for:"phone",class:"text-sm font-medium"},{default:u(()=>e[11]||(e[11]=[f("WhatsApp")])),_:1}),m.value?(d(),v(t($),{key:0,id:"phone",modelValue:t(r).phone,"onUpdate:modelValue":e[2]||(e[2]=n=>t(r).phone=n),placeholder:"WhatsApp",class:"h-10 w-full"},null,8,["modelValue"])):(d(),p("div",Pe,g(q(t(l).phone)||"Não informado"),1)),i(k,{class:"mt-1",message:t(r).errors.phone},null,8,["message"])])])])]),o.mustVerifyEmail&&!t(l).email_verified_at&&!m.value?(d(),p("div",Ee,[s("p",Ve,[e[14]||(e[14]=f(" Seu endereço de e-mail não foi verificado. ")),i(t(R),{href:o.route("verification.send"),method:"post",as:"button",class:"ml-1 font-medium underline hover:no-underline"},{default:u(()=>e[13]||(e[13]=[f(" Clique aqui para reenviar o e-mail de verificação. ")])),_:1},8,["href"])]),o.status==="verification-link-sent"?(d(),p("div",je," Um novo link de verificação foi enviado para seu endereço de e-mail. ")):b("",!0)])):b("",!0),i(t(ee),{show:t(r).recentlySuccessful,enter:"transition ease-in-out","enter-from":"opacity-0",leave:"transition ease-in-out","leave-to":"opacity-0"},{default:u(()=>e[15]||(e[15]=[s("div",{class:"rounded-lg border border-green-200 bg-green-50 p-4 dark:border-green-800 dark:bg-green-900/20"},[s("p",{class:"text-sm font-medium text-green-800 dark:text-green-200"},"Salvo com sucesso.")],-1)])),_:1},8,["show"])])]),_:1})]),_:1}))}});export{st as default};
