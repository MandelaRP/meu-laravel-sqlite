import{a as Z,_ as ee}from"./CardContent.vue_vue_type_script_setup_true_lang-t8QW7drv.js";import{_ as te}from"./CardDescription.vue_vue_type_script_setup_true_lang-C3akIHir.js";import{_ as oe,a as re}from"./CardTitle.vue_vue_type_script_setup_true_lang-D-Ey-PXk.js";import{_ as ae,a as se,b as Q,c as w,d as le,e as h}from"./TableHeader.vue_vue_type_script_setup_true_lang-BlkaBjXq.js";import{_ as ne}from"./index-DB509qdv.js";import{_ as v}from"./Button.vue_vue_type_script_setup_true_lang-CZrugS0B.js";import{_ as ue}from"./Input.vue_vue_type_script_setup_true_lang-DYiRcBo-.js";import{_ as de,a as ie,b as me,c as fe,d as F}from"./SelectValue.vue_vue_type_script_setup_true_lang-2pPvREZz.js";import{S as ce}from"./search-YOeA7xce.js";import{F as pe}from"./filter-Bo24e_UH.js";import{F as G}from"./file-text-B1Kh-y_6.js";import{A as ge,a as ve,b as be}from"./arrow-up-Cq3DMFG3.js";import{D as xe}from"./dollar-sign-Dx2OW2cR.js";import{C as _e}from"./credit-card-DPATrQHH.js";import{B as ye}from"./building-2-Bs7tmiXJ.js";import{S as we}from"./smartphone-J1R7xfdL.js";import{r as L,k,h as f,o as d,b as a,a as r,u as o,d as c,f as l,t as p,c as D,F as V,e as H,j as b,i as x,g as he}from"./app-rxSkm_8n.js";import"./utils-CytzSlOG.js";import"./Primitive-BrnKrBYL.js";import"./index-CNtfqitb.js";import"./VisuallyHidden-BSu4F0qb.js";import"./Collection-DhgCJFi0.js";import"./useForwardExpose-DMzqEU9f.js";import"./useId-twxlRIXh.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./check-DXIJwO3F.js";import"./createLucideIcon-C3bDf7p4.js";import"./utils-pWec8FuC.js";import"./floating-ui.vue-CZZPkfLm.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./useFormControl-BXJ2ZBjh.js";const Ce={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Se={class:"flex flex-col sm:flex-row gap-3 mt-6"},$e={class:"relative flex-1"},Fe={class:"overflow-x-auto"},Le={class:"flex items-center gap-2"},ke={class:"font-medium text-foreground"},De={key:0,class:"flex flex-col items-center justify-center py-12 text-center"},Ae={class:"bg-muted rounded-full p-3 mb-4"},Te={class:"text-muted-foreground max-w-sm"},it={__name:"TransactionList",props:{title:{type:String,default:"Transações Recentes"},description:{type:String,default:"Últimas movimentações financeiras"},transactions:{type:Array,default:()=>[]}},setup(A){const T=A,S={paid:{bg:"bg-[#00C48C]/10",text:"text-[#00C48C]",border:"border-[#00C48C]/20",label:"Pago"},pending:{bg:"bg-[#FFC107]/10",text:"text-[#FFC107]",border:"border-[#FFC107]/20",label:"Pendente"},cancelled:{bg:"bg-[#F44336]/10",text:"text-[#F44336]",border:"border-[#F44336]/20",label:"Cancelado"},refunded:{bg:"bg-[#F44336]/10",text:"text-[#F44336]",border:"border-[#F44336]/20",label:"Reembolsado"}},g=L(""),u=L("all"),n=L(null),C=L("desc"),J=k(()=>T.transactions&&T.transactions.length>0?T.transactions.map(t=>({invoice:t.invoice||t.id,paymentStatus:t.payment_status||t.raw_status||"Pending",totalAmount:t.total_amount||0,paymentMethod:t.payment_method||"N/A",fee:t.fee||0,product:t.product||"Produto Digital",date:t.date||t.created_at||new Date().toISOString()})):[]),$=t=>{const e=t==null?void 0:t.toLowerCase();return e==="paid"||e==="pago"?S.paid:e==="pending"||e==="pendente"?S.pending:e==="cancelled"||e==="unpaid"||e==="cancelado"?S.cancelled:e==="refunded"||e==="reembolsado"?S.refunded:{bg:"bg-muted/50",text:"text-muted-foreground",border:"border-border",label:t||"Desconhecido"}},K=t=>{switch(t==null?void 0:t.toLowerCase()){case"paid":return"Pago";case"pending":return"Pendente";case"refunded":return"Reembolsado";case"cancelled":case"unpaid":return"Cancelado";default:return"Todos"}},W=k(()=>u.value==="all"?"Todos os status":K(u.value)),X=t=>{switch(t==null?void 0:t.toLowerCase()){case"pix":return we;case"ted":return ye;case"boleto":return G;case"cartão":case"card":return _e;default:return xe}},R=t=>{if(typeof t=="string"){if(t.includes("R$"))return t;t=parseFloat(t.replace(/[^\d,.-]/g,"").replace(",","."))}const e=typeof t=="number"?t:parseFloat(t)||0;return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},P=t=>parseFloat(t.replace(/[R$\s.]/g,"").replace(",",".")),_=t=>{n.value===t?C.value=C.value==="asc"?"desc":"asc":(n.value=t,C.value="desc")},y=t=>n.value!==t?ge:C.value==="asc"?ve:be,B=k(()=>{const t=J.value.filter(e=>{var i,M,N,j,I,U,q,E,O;const s=((i=e.invoice)==null?void 0:i.toLowerCase().includes(g.value.toLowerCase()))||((M=e.acquirerRef)==null?void 0:M.toLowerCase().includes(g.value.toLowerCase()))||((N=e.id)==null?void 0:N.toString().includes(g.value.toLowerCase())),m=u.value==="all"||((j=e.paymentStatus)==null?void 0:j.toLowerCase())===u.value||((I=e.status)==null?void 0:I.toLowerCase())===u.value||((U=e.raw_status)==null?void 0:U.toLowerCase())===u.value||u.value==="paid"&&((q=e.paymentStatus)==null?void 0:q.toLowerCase())==="pago"||u.value==="pending"&&((E=e.paymentStatus)==null?void 0:E.toLowerCase())==="pendente"||u.value==="refunded"&&((O=e.paymentStatus)==null?void 0:O.toLowerCase())==="reembolsado";return s&&m});return n.value&&t.sort((e,s)=>{let m=e[n.value],i=s[n.value];return n.value==="date"&&(m=new Date(m).getTime().toString(),i=new Date(i).getTime().toString()),(n.value==="totalAmount"||n.value==="fee")&&(m=typeof m=="number"?m:P(String(m||"0")),i=typeof i=="number"?i:P(String(i||"0"))),C.value==="asc"?m.localeCompare(i):i.localeCompare(m)}),t}),Y=()=>{g.value="",u.value="all"},z=k(()=>g.value||u.value!=="all");return(t,e)=>(d(),f(o(ee),{class:"w-full border-border bg-card"},{default:a(()=>[r(o(oe),{class:"pb-4"},{default:a(()=>[c("div",Ce,[c("div",null,[r(o(re),{class:"text-2xl font-bold text-card-foreground"},{default:a(()=>[l(p(A.title),1)]),_:1}),r(o(te),{class:"text-base mt-1 text-muted-foreground"},{default:a(()=>[l(p(A.description),1)]),_:1})])]),c("div",Se,[c("div",$e,[r(o(ce),{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),r(o(ue),{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=s=>g.value=s),placeholder:"Buscar por ID...",class:"pl-10 bg-background border-border text-foreground placeholder:text-muted-foreground"},null,8,["modelValue"])]),r(o(de),{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=s=>u.value=s)},{default:a(()=>[r(o(ie),{class:"w-full sm:w-auto sm:min-w-[180px] bg-background border-border text-foreground"},{default:a(()=>[r(o(pe),{class:"h-4 w-4 mr-2 text-muted-foreground flex-shrink-0"}),r(o(me),null,{default:a(()=>[u.value==="all"?(d(),D(V,{key:0},[l("Todos os status")],64)):(d(),D(V,{key:1},[l(p(W.value),1)],64))]),_:1})]),_:1}),r(o(fe),{class:"bg-popover border-border"},{default:a(()=>[r(o(F),{value:"all",class:"text-popover-foreground hover:bg-accent hover:text-accent-foreground"},{default:a(()=>e[8]||(e[8]=[l("Todos")])),_:1}),r(o(F),{value:"pending",class:"text-popover-foreground hover:bg-accent hover:text-accent-foreground"},{default:a(()=>e[9]||(e[9]=[l("Pendente")])),_:1}),r(o(F),{value:"paid",class:"text-popover-foreground hover:bg-accent hover:text-accent-foreground"},{default:a(()=>e[10]||(e[10]=[l("Pago")])),_:1}),r(o(F),{value:"refunded",class:"text-popover-foreground hover:bg-accent hover:text-accent-foreground"},{default:a(()=>e[11]||(e[11]=[l("Reembolsado")])),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1}),r(o(Z),{class:"p-0"},{default:a(()=>[c("div",Fe,[r(o(ae),null,{default:a(()=>[r(o(se),null,{default:a(()=>[r(o(Q),{class:"bg-muted/50 border-border hover:bg-muted/50"},{default:a(()=>[r(o(w),{class:"font-semibold text-muted-foreground"},{default:a(()=>[r(o(v),{variant:"ghost",size:"sm",onClick:e[2]||(e[2]=s=>_("invoice")),class:"h-auto p-0 font-semibold hover:bg-transparent text-muted-foreground hover:text-foreground"},{default:a(()=>[e[12]||(e[12]=l(" ID ")),(d(),f(b(y("invoice")),{class:x(["h-4 w-4 ml-1",n.value==="invoice"?"text-foreground":"opacity-50"])},null,8,["class"]))]),_:1})]),_:1}),r(o(w),{class:"font-semibold text-muted-foreground"},{default:a(()=>[r(o(v),{variant:"ghost",size:"sm",onClick:e[3]||(e[3]=s=>_("paymentMethod")),class:"h-auto p-0 font-semibold hover:bg-transparent text-muted-foreground hover:text-foreground"},{default:a(()=>[e[13]||(e[13]=l(" Método ")),(d(),f(b(y("paymentMethod")),{class:x(["h-4 w-4 ml-1",n.value==="paymentMethod"?"text-foreground":"opacity-50"])},null,8,["class"]))]),_:1})]),_:1}),r(o(w),{class:"font-semibold text-muted-foreground"},{default:a(()=>[r(o(v),{variant:"ghost",size:"sm",onClick:e[4]||(e[4]=s=>_("paymentStatus")),class:"h-auto p-0 font-semibold hover:bg-transparent text-muted-foreground hover:text-foreground"},{default:a(()=>[e[14]||(e[14]=l(" Status ")),(d(),f(b(y("paymentStatus")),{class:x(["h-4 w-4 ml-1",n.value==="paymentStatus"?"text-foreground":"opacity-50"])},null,8,["class"]))]),_:1})]),_:1}),r(o(w),{class:"font-semibold text-right text-muted-foreground"},{default:a(()=>[r(o(v),{variant:"ghost",size:"sm",onClick:e[5]||(e[5]=s=>_("totalAmount")),class:"h-auto p-0 font-semibold hover:bg-transparent text-muted-foreground hover:text-foreground"},{default:a(()=>[e[15]||(e[15]=l(" Valor ")),(d(),f(b(y("totalAmount")),{class:x(["h-4 w-4 ml-1",n.value==="totalAmount"?"text-foreground":"opacity-50"])},null,8,["class"]))]),_:1})]),_:1}),r(o(w),{class:"font-semibold text-right text-muted-foreground"},{default:a(()=>[r(o(v),{variant:"ghost",size:"sm",onClick:e[6]||(e[6]=s=>_("fee")),class:"h-auto p-0 font-semibold hover:bg-transparent text-muted-foreground hover:text-foreground"},{default:a(()=>[e[16]||(e[16]=l(" Taxa ")),(d(),f(b(y("fee")),{class:x(["h-4 w-4 ml-1",n.value==="fee"?"text-foreground":"opacity-50"])},null,8,["class"]))]),_:1})]),_:1}),r(o(w),{class:"font-semibold text-muted-foreground"},{default:a(()=>[r(o(v),{variant:"ghost",size:"sm",onClick:e[7]||(e[7]=s=>_("product")),class:"h-auto p-0 font-semibold hover:bg-transparent text-muted-foreground hover:text-foreground"},{default:a(()=>[e[17]||(e[17]=l(" Produto ")),(d(),f(b(y("product")),{class:x(["h-4 w-4 ml-1",n.value==="product"?"text-foreground":"opacity-50"])},null,8,["class"]))]),_:1})]),_:1})]),_:1})]),_:1}),r(o(le),null,{default:a(()=>[(d(!0),D(V,null,he(B.value,s=>(d(),f(o(Q),{key:s.invoice||s.id,class:"border-border hover:bg-muted/50 transition-colors"},{default:a(()=>[r(o(h),{class:"font-mono font-medium text-foreground"},{default:a(()=>[l(p(s.invoice||s.id||"-"),1)]),_:2},1024),r(o(h),null,{default:a(()=>[c("div",Le,[(d(),f(b(X(s.paymentMethod||s.method)),{class:"h-4 w-4 text-muted-foreground"})),c("span",ke,p(s.paymentMethod||s.method||"-"),1)])]),_:2},1024),r(o(h),null,{default:a(()=>[r(o(ne),{variant:"outline",class:x(`${$(s.paymentStatus||s.status).bg} ${$(s.paymentStatus||s.status).text} ${$(s.paymentStatus||s.status).border} font-bold border`)},{default:a(()=>[l(p($(s.paymentStatus||s.status).label),1)]),_:2},1032,["class"])]),_:2},1024),r(o(h),{class:"text-right font-semibold text-foreground"},{default:a(()=>[l(p(R(s.totalAmount||s.amount||s.value||"R$ 0,00")),1)]),_:2},1024),r(o(h),{class:"text-right font-medium text-red-600 dark:text-red-400"},{default:a(()=>[l(p(R(s.fee||s.tax||"R$ 0,00")),1)]),_:2},1024),r(o(h),{class:"font-medium text-foreground"},{default:a(()=>[l(p(s.product||s.product_name||"-"),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),B.value.length===0?(d(),D("div",De,[c("div",Ae,[r(o(G),{class:"h-6 w-6 text-muted-foreground"})]),e[19]||(e[19]=c("h3",{class:"text-lg font-semibold text-foreground mb-2"},"Nenhuma transação encontrada",-1)),c("p",Te,p(z.value?"Tente ajustar os filtros para encontrar as transações desejadas.":"Quando você tiver transações, elas aparecerão aqui."),1),z.value?(d(),f(o(v),{key:0,variant:"outline",size:"sm",class:"mt-4 border-border hover:bg-accent hover:text-accent-foreground",onClick:Y},{default:a(()=>e[18]||(e[18]=[l(" Limpar filtros ")])),_:1})):H("",!0)])):H("",!0)]),_:1})]),_:1}))}};export{it as default};
