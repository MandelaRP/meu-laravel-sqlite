import{k as d,c,o as s,a as r,e as x,b as y,d as m,u as i,t as v,h as w,j,y as M,i as I,r as g,l as A,f as V,F as z,g as L,A as N,G as R,W}from"./app-rxSkm_8n.js";import q from"./CountdownTimer-BarQZIm2.js";import G from"./OrderBump-B0FL1QIJ.js";import X from"./Form-iOR6qHCU.js";import{_ as H}from"./Button.vue_vue_type_script_setup_true_lang-CZrugS0B.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{L as D}from"./loader-circle-Dpydm2ko.js";import{C as _}from"./circle-check-big-CYSTrOyz.js";import{S as K}from"./shopping-cart-CIHs1TUy.js";import{C as E}from"./circle-alert-B6SM_-WU.js";import Q from"./PaymentMethods-ZW_ZM2Qx.js";import U from"./OrderSummary-DpKTCqm1.js";import{a as Y,_ as Z}from"./CardContent.vue_vue_type_script_setup_true_lang-t8QW7drv.js";import{_ as ee}from"./CardDescription.vue_vue_type_script_setup_true_lang-C3akIHir.js";import{_ as te,a as oe}from"./CardTitle.vue_vue_type_script_setup_true_lang-D-Ey-PXk.js";import ae from"./Banner-CleHKj9w.js";import"./Input.vue_vue_type_script_setup_true_lang-DYiRcBo-.js";import"./utils-CytzSlOG.js";import"./index-CNtfqitb.js";import"./Label.vue_vue_type_script_setup_true_lang-oy-9Lx9Q.js";import"./index-XW9fu56b.js";import"./floating-ui.vue-CZZPkfLm.js";import"./user-BzOG761P.js";import"./createLucideIcon-C3bDf7p4.js";import"./mail-DQ1qAuTh.js";import"./map-pin-DVa-zxe0.js";import"./credit-card-DPATrQHH.js";import"./plus-C42tnu2a.js";import"./Primitive-BrnKrBYL.js";import"./shield-SwvXSpSR.js";import"./file-text-B1Kh-y_6.js";import"./qr-code-GahK7m1_.js";import"./clock-CyEfkKFy.js";import"./zap-BT-H_JiL.js";import"./receipt-W_Mk4W4g.js";import"./tag-NRaEFR75.js";import"./package-B8fsICZ3.js";const re={class:"space-y-3"},se={key:0,class:"flex items-center justify-center gap-3"},le={key:1,class:"flex items-center justify-center gap-3"},ie={key:2,class:"flex items-center justify-center gap-3"},ne={key:0,class:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg"},ue={class:"text-sm text-red-700"},ce={key:1,class:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-lg"},me={class:"text-sm text-green-700"},de={key:2,class:"flex items-center gap-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg"},fe={class:"text-sm text-yellow-700"},pe={__name:"SubmitButton",props:{isSubmitting:{type:Boolean,default:!1},isValid:{type:Boolean,default:!1},hasData:{type:Boolean,default:!1},submitSuccess:{type:Boolean,default:!1},submitError:{type:String,default:""},primaryColor:{type:String,default:"#2563eb"},hoverColor:{type:String,default:"#1d4ed8"},loadingText:{type:String,default:"Processando..."},successText:{type:String,default:"Pedido Enviado!"},defaultText:{type:String,default:"Finalizar Compra"},emptyText:{type:String,default:"Preencha os dados"},errorText:{type:String,default:"Por favor, preencha todos os campos obrigatórios."}},emits:["click"],setup(t,{emit:h}){const e=t,f=h,b=d(()=>e.isSubmitting?e.loadingText:e.submitSuccess?e.successText:e.hasData?e.defaultText:e.emptyText),u=d(()=>e.isSubmitting?D:e.submitSuccess?_:K),S=d(()=>({"opacity-50 cursor-not-allowed":e.isSubmitting||!e.isValid,"transform scale-95":e.isSubmitting,"shadow-lg hover:shadow-xl":!e.isSubmitting&&e.isValid,"success-bounce":e.submitSuccess})),n=d(()=>({backgroundColor:e.isSubmitting?e.primaryColor+"80":e.primaryColor,"--hover-color":e.hoverColor})),p=()=>{!e.isSubmitting&&e.isValid&&f("click")};return(C,k)=>(s(),c("div",re,[r(i(H),{onClick:p,disabled:t.isSubmitting||!t.isValid,class:I(["w-full h-14 text-lg font-semibold transition-all duration-300 relative overflow-hidden group",S.value]),style:M(n.value)},{default:y(()=>[t.isSubmitting?(s(),c("div",se,[r(i(D),{class:"h-5 w-5 animate-spin"}),m("span",null,v(b.value),1)])):t.submitSuccess?(s(),c("div",le,[r(i(_),{class:"h-5 w-5"}),m("span",null,v(b.value),1)])):(s(),c("div",ie,[(s(),w(j(u.value),{class:"h-5 w-5"})),m("span",null,v(b.value),1)])),k[0]||(k[0]=m("div",{class:"absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity duration-300"},null,-1))]),_:1},8,["disabled","class","style"]),t.submitError?(s(),c("div",ne,[r(i(E),{class:"h-4 w-4 text-red-500"}),m("span",ue,v(t.submitError),1)])):x("",!0),t.submitSuccess?(s(),c("div",ce,[r(i(_),{class:"h-4 w-4 text-green-500"}),m("span",me,v(t.successText),1)])):x("",!0),!t.isValid&&t.hasData?(s(),c("div",de,[r(i(E),{class:"h-4 w-4 text-yellow-500"}),m("span",fe,v(t.errorText),1)])):x("",!0)]))}},he=J(pe,[["__scopeId","data-v-a3e77fa5"]]),be={class:"max-w-2xl mx-auto pt-8"},ve={class:"mt-8"},tt={__name:"SingleCheckout",props:{checkout:Object},setup(t){const h=t,e=g(null),f=g(!1),b=g(!1),u=g(""),S=d(()=>{var o,a;return((a=(o=h.checkout)==null?void 0:o.payment_methods)==null?void 0:a.filter(l=>l.enabled===!0||l.enabled==="1"))||[]}),n=g("");A(()=>{S.value.length>0&&!n.value&&(n.value=S.value[0].name)});const p=g(new Set),C=d(()=>{var o;return((o=h.checkout)==null?void 0:o.countdown_enabled)||!1}),k=d(()=>e.value&&e.value.checkFormValidity?e.value.checkFormValidity():!1),P=d(()=>{if(!e.value)return!1;const o=e.value.formData;return Object.values(o).some(a=>a&&a.trim()!=="")}),F=o=>{n.value=o,console.log("Método de pagamento selecionado:",o)},O=o=>{const{orderBumpId:a,checked:l}=o;l?p.value.add(a):p.value.delete(a),console.log("Order bump toggle:",{orderBumpId:a,checked:l,selectedOrderBumps:Array.from(p.value)})},$=async()=>{if(!e.value||!k.value){u.value="Por favor, preencha todos os campos obrigatórios.";return}if(!n.value){u.value="Por favor, selecione uma forma de pagamento.";return}if(n.value!=="pix"){u.value="Por enquanto, apenas pagamento via PIX está disponível.";return}f.value=!0,u.value="",b.value=!1;try{const o=e.value.formData,a=Array.from(p.value);W.post(route("checkout.process-payment",h.checkout.id),{...o,payment_method:n.value,order_bump_ids:a},{preserveScroll:!1,onError:l=>{u.value=l.error||Object.values(l).flat().join(", ")||"Erro ao processar pagamento. Tente novamente.",f.value=!1},onFinish:()=>{f.value=!1}})}catch(o){console.error("Erro ao enviar formulário:",o),u.value="Erro ao enviar formulário. Tente novamente.",f.value=!1}};return(o,a)=>{var l;return s(),c("div",be,[t.checkout.banner?(s(),w(ae,{key:0,banner:t.checkout.banner,"product-name":((l=t.checkout.product)==null?void 0:l.name)||""},null,8,["banner","product-name"])):x("",!0),C.value?(s(),w(q,{key:1,checkout:h.checkout},null,8,["checkout"])):x("",!0),m("div",ve,[r(i(Z),{class:"w-full max-w-2xl mx-auto shadow-lg !bg-white !text-gray-900 border border-gray-300 dark:!bg-white dark:!text-gray-900 rounded-2xl overflow-hidden"},{default:y(()=>[r(i(te),{class:"!bg-white !text-gray-900 pb-4"},{default:y(()=>[r(i(oe),{class:"!text-gray-900 dark:!text-gray-900"},{default:y(()=>a[0]||(a[0]=[V(" Complete seu pedido ")])),_:1}),r(i(ee),{class:"!text-gray-600 dark:!text-gray-600"},{default:y(()=>a[1]||(a[1]=[V(" Complete seu pedido para garantir a melhor experiência. ")])),_:1})]),_:1}),r(i(Y),{class:"space-y-6 !bg-white !text-gray-900 dark:!bg-white dark:!text-gray-900 pt-0"},{default:y(()=>{var B;return[r(X,{ref_key:"formRef",ref:e,form:t.checkout.form_fields_config,"show-submit-button":!1},null,8,["form"]),r(Q,{"payment-methods":t.checkout.payment_methods,"selected-method":n.value,onMethodSelected:F},null,8,["payment-methods","selected-method"]),(s(!0),c(z,null,L(t.checkout.order_bumps,T=>N((s(),w(G,{key:T.id,orderBump:T,checkout:t.checkout,onOrderBumpToggle:O},null,8,["orderBump","checkout"])),[[R,t.checkout.order_bump_enabled]])),128)),r(U,{checkout:t.checkout,"selected-payment-method":n.value,"form-data":((B=e.value)==null?void 0:B.formData)||{},"selected-order-bumps":p.value},null,8,["checkout","selected-payment-method","form-data","selected-order-bumps"]),r(he,{"is-submitting":f.value,"is-valid":k.value,"has-data":P.value,"submit-success":b.value,"submit-error":u.value,"primary-color":t.checkout.button_primary_color,"hover-color":t.checkout.button_hover_primary_color,onClick:$},null,8,["is-submitting","is-valid","has-data","submit-success","submit-error","primary-color","hover-color"])]}),_:1})]),_:1})])])}}};export{tt as default};
