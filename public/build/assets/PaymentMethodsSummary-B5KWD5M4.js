import{a as P,_ as D}from"./CardContent.vue_vue_type_script_setup_true_lang-DPkaWiTn.js";import{_ as R,a as v}from"./CardTitle.vue_vue_type_script_setup_true_lang-Bn8k43WC.js";import{S as _}from"./smartphone-DVMWLSSb.js";import{C}from"./credit-card-LFa5ma_M.js";import{F as k}from"./file-text-BU_yez8X.js";import{T}from"./trending-up-DcFmA1o5.js";import{R as N}from"./refresh-cw-hLfz_5SK.js";import{c as V}from"./createLucideIcon-B4R1MoSR.js";import{C as $}from"./circle-alert-V_6AzMZE.js";import{k as w,h as S,o as x,b as f,a as m,u as d,d as e,i as a,f as M,c as L,F as I,g as O,j as z,t as u,y as A}from"./app-S3kx2b0d.js";import"./utils-CytzSlOG.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=V("CalendarClockIcon",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]),X={class:"flex items-center gap-2"},q={class:"mb-6"},H={class:"space-y-5"},Q={class:"flex items-center justify-between"},U={class:"flex items-center gap-3 flex-1 min-w-0"},G={class:"font-medium text-foreground text-sm sm:text-base"},J={class:"w-full bg-muted rounded-full h-1 overflow-hidden"},K={class:"flex-1 flex flex-col"},W={class:"flex items-center gap-2 mb-3"},Y={class:"grid grid-cols-2 gap-2"},Z={class:"flex items-center gap-2.5 p-2 rounded-lg bg-card border border-border"},ee={class:a(["flex h-8 w-8 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/30 flex-shrink-0"])},se={class:"flex-1 min-w-0"},te={class:"flex items-center gap-2.5 p-2 rounded-lg bg-card border border-border"},ae={class:a(["flex h-8 w-8 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/30 flex-shrink-0"])},oe={class:"flex-1 min-w-0"},ne={class:"flex items-center gap-2.5 p-2 rounded-lg bg-card border border-border"},re={class:a(["flex h-8 w-8 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/30 flex-shrink-0"])},le={class:"flex-1 min-w-0"},ce={class:"flex items-center gap-2.5 p-2 rounded-lg bg-card border border-border"},ie={class:a(["flex h-8 w-8 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/30 flex-shrink-0"])},de={class:"flex-1 min-w-0"},i="text-green-500",b="bg-green-500",Ce={__name:"PaymentMethodsSummary",props:{transactions:{type:Array,default:()=>[]},paymentMethods:{type:Object,default:()=>({pix:0,card:0,boleto:0})},financialSummary:{type:Object,default:()=>({conversao:0,reembolsos:0,preChargeback:0,chargeback:0})}},setup(j){const s=j,F=w(()=>{if(s.paymentMethods&&(s.paymentMethods.pix>0||s.paymentMethods.card>0||s.paymentMethods.boleto>0))return[{icon:_,name:"Pix",percentage:s.paymentMethods.pix||0},{icon:C,name:"Cartão de Crédito",percentage:s.paymentMethods.card||0},{icon:k,name:"Boleto",percentage:s.paymentMethods.boleto||0}];const n=s.transactions&&s.transactions.length>0?s.transactions:[],t={PIX:{count:0,icon:_,name:"Pix"},"Cartão de Crédito":{count:0,icon:C,name:"Cartão de Crédito"},Boleto:{count:0,icon:k,name:"Boleto"}};n.forEach(c=>{const o=c.paymentMethod||c.method||c.metodo;o&&t[o]?t[o].count++:o&&(o.toLowerCase().includes("pix")||o.toLowerCase()==="pix")?t.PIX.count++:o&&(o.toLowerCase().includes("cartão")||o.toLowerCase().includes("card"))?t["Cartão de Crédito"].count++:o&&o.toLowerCase().includes("boleto")&&t.Boleto.count++});const l=Object.values(t).reduce((c,o)=>c+o.count,0)||1;return Object.values(t).map(c=>({...c,percentage:l>0?Math.round(c.count/l*100):0}))}),p=w(()=>{var g,h,y;if(s.financialSummary&&(s.financialSummary.conversao>0||s.financialSummary.reembolsos>0||s.financialSummary.conversion>0||s.financialSummary.refunds>0))return{conversion:s.financialSummary.conversao||s.financialSummary.conversion||0,refunds:s.financialSummary.reembolsos||s.financialSummary.refunds||0,preChargeback:s.financialSummary.preChargeback||0,chargeback:s.financialSummary.chargeback||0};const n=s.transactions&&s.transactions.length>0?s.transactions:[],t=n.length||1,l=n.filter(r=>(r.paymentStatus||r.status||r.tipo||"").toLowerCase()==="paid"||(r.paymentStatus||r.status||r.tipo||"").toLowerCase()==="entrada").length,c=n.filter(r=>(r.paymentStatus||r.status||"").toLowerCase()==="refunded"||(r.paymentStatus||r.status||"").toLowerCase()==="unpaid").length;return{conversion:((g=s.financialSummary)==null?void 0:g.conversao)!==void 0?parseFloat(s.financialSummary.conversao.toFixed(2)):t>0?Math.round(l/t*100):0,refunds:c,preChargeback:((h=s.financialSummary)==null?void 0:h.preChargeback)||0,chargeback:((y=s.financialSummary)==null?void 0:y.chargeback)||0}}),B=n=>n==null||isNaN(n)?"0%":parseFloat(n.toFixed(2))+"%";return(n,t)=>(x(),S(d(D),{class:"w-full h-full border-border bg-card flex flex-col"},{default:f(()=>[m(d(R),{class:"pb-3 sm:pb-4"},{default:f(()=>[e("div",X,[e("div",{class:a(["h-5 w-1 rounded-full flex-shrink-0",b])},null,2),m(d(v),{class:"text-base sm:text-lg"},{default:f(()=>t[0]||(t[0]=[M("Métodos de Pagamento")])),_:1})])]),_:1}),m(d(P),{class:"px-3 sm:px-6 flex-1 flex flex-col pb-3 sm:pb-4"},{default:f(()=>[e("div",q,[e("div",H,[(x(!0),L(I,null,O(F.value,l=>(x(),L("div",{key:l.name,class:"space-y-2"},[e("div",Q,[e("div",U,[(x(),S(z(l.icon),{class:a(["h-5 w-5 flex-shrink-0",i])},null,8,["class"])),e("span",G,u(l.name),1)]),e("span",{class:a(["font-semibold text-sm sm:text-base",i])},u(l.percentage)+"% ",3)]),e("div",J,[e("div",{class:a(["h-full rounded-full transition-all duration-500",b]),style:A({width:`${l.percentage}%`})},null,6)])]))),128))])]),t[6]||(t[6]=e("div",{class:"border-t border-border my-4"},null,-1)),e("div",K,[e("div",W,[e("div",{class:a(["h-5 w-1 rounded-full flex-shrink-0",b])},null,2),m(d(v),{class:"text-sm sm:text-base font-semibold text-card-foreground"},{default:f(()=>t[1]||(t[1]=[M(" Resumo Financeiro ")])),_:1})]),e("div",Y,[e("div",Z,[e("div",ee,[m(d(T),{class:a(["h-4 w-4",i])},null,8,["class"])]),e("div",se,[t[2]||(t[2]=e("p",{class:"text-[10px] sm:text-xs text-muted-foreground mb-0.5"},"Conversão",-1)),e("p",{class:a(["text-sm sm:text-base font-bold",i])},u(B(p.value.conversion)),3)])]),e("div",te,[e("div",ae,[m(d(N),{class:a(["h-4 w-4",i])},null,8,["class"])]),e("div",oe,[t[3]||(t[3]=e("p",{class:"text-[10px] sm:text-xs text-muted-foreground mb-0.5"},"Qtde. Reembolsos",-1)),e("p",{class:a(["text-sm sm:text-base font-bold",i])},u(p.value.refunds),3)])]),e("div",ne,[e("div",re,[m(d(E),{class:a(["h-4 w-4",i])},null,8,["class"])]),e("div",le,[t[4]||(t[4]=e("p",{class:"text-[10px] sm:text-xs text-muted-foreground mb-0.5"},"Pré-Chargeback",-1)),e("p",{class:a(["text-sm sm:text-base font-bold",i])},u(p.value.preChargeback)+"% ",3)])]),e("div",ce,[e("div",ie,[m(d($),{class:a(["h-4 w-4",i])},null,8,["class"])]),e("div",de,[t[5]||(t[5]=e("p",{class:"text-[10px] sm:text-xs text-muted-foreground mb-0.5"},"Chargeback",-1)),e("p",{class:a(["text-sm sm:text-base font-bold",i])},u(p.value.chargeback)+"% ",3)])])])])]),_:1})]),_:1}))}};export{Ce as default};
