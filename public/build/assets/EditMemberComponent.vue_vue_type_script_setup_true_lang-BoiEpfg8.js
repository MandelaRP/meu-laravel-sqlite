import{z as A,n as N,C as U,l as S,r as z,h as _,o as u,b as n,a as r,u as e,d as o,f as m,A as b,c as g,F as y,g as x,t as V,E as $,G as B,e as M}from"./app-rxSkm_8n.js";import{_ as D}from"./Button.vue_vue_type_script_setup_true_lang-CZrugS0B.js";import{u as F}from"./use-toast-D5p1K6Vb.js";import{_ as f}from"./InputError.vue_vue_type_script_setup_true_lang-CNY2eB66.js";import{a as J,b as L,c as O,d as T,_ as P}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DL60ihD0.js";import{_ as j}from"./DialogFooter.vue_vue_type_script_setup_true_lang-zwGg7kAD.js";import{_ as q}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-xGe3a28Q.js";import{_ as c}from"./Label.vue_vue_type_script_setup_true_lang-oy-9Lx9Q.js";import{_ as G,a as H,b as I,c as K,d as Q}from"./SelectValue.vue_vue_type_script_setup_true_lang-2pPvREZz.js";import{_ as R}from"./SelectGroup.vue_vue_type_script_setup_true_lang-ChdP9-aO.js";import{_ as v}from"./Input.vue_vue_type_script_setup_true_lang-DYiRcBo-.js";import{P as W}from"./pencil-CBGB4SIg.js";import{L as X}from"./loader-circle-Dpydm2ko.js";const Y={class:"grid gap-4 py-4"},Z={class:"space-y-4"},ee={class:"grid grid-cols-2 gap-4"},ae={class:"grid grid-cols-2 gap-4"},le={class:"flex items-center space-x-2"},se={class:"flex flex-col space-y-2 mt-5"},re={class:"grid grid-cols-2 gap-2"},oe=["id","value"],ne=["for"],ye=A({__name:"EditMemberComponent",props:{member:{},roles:{},alertChannels:{}},setup(w){const{toast:h}=F();N().props.auth.user;const s=w,a=U({user_id:s.member.user_id,name:s.member.name,email:s.member.email,phone:s.member.phone,role:"",is_active:s.member.is_active,notifications:s.member.notifications,alert_channels:[]});S(()=>{if(s.member.alert_channels)try{typeof s.member.alert_channels=="string"?a.alert_channels=JSON.parse(s.member.alert_channels):Array.isArray(s.member.alert_channels)&&(a.alert_channels=s.member.alert_channels)}catch(d){console.error("Erro ao parsear alert_channels:",d),a.alert_channels=[]}s.member.roles&&s.member.roles.length>0&&(a.role=s.member.roles[0].name)});const p=z(!1),C=()=>{a.put(route("team.update",{id:s.member.id}),{onSuccess:()=>{h({title:"Membro atualizado com sucesso"}),p.value=!1},onError:d=>{console.log(d),h({title:"Oops! Houve um erro ao atualizar o membro.",variant:"destructive"})}})},k=()=>{if(a.name=s.member.name,a.email=s.member.email,a.phone=s.member.phone,a.is_active=s.member.is_active,a.notifications=s.member.notifications,s.member.alert_channels)try{typeof s.member.alert_channels=="string"?a.alert_channels=JSON.parse(s.member.alert_channels):Array.isArray(s.member.alert_channels)&&(a.alert_channels=s.member.alert_channels)}catch(d){console.error("Erro ao parsear alert_channels:",d),a.alert_channels=[]}s.member.roles&&s.member.roles.length>0&&(a.role=s.member.roles[0].name),p.value=!1};return(d,l)=>(u(),_(e(P),{open:p.value,"onUpdate:open":k},{default:n(()=>[r(e(q),{"as-child":""},{default:n(()=>[o("button",{onClick:l[0]||(l[0]=t=>p.value=!0),class:"rounded-full p-2 text-gray-500 hover:bg-gray-100 focus:outline-none dark:text-gray-400 dark:hover:bg-gray-700"},[r(e(W),{class:"h-4 w-4"})])]),_:1}),r(e(J),{class:"sm:max-w-[425px]"},{default:n(()=>[r(e(L),null,{default:n(()=>[r(e(O),null,{default:n(()=>l[7]||(l[7]=[m("Editar membro")])),_:1}),r(e(T),null,{default:n(()=>l[8]||(l[8]=[m(" Editar as informações do membro da equipe. ")])),_:1})]),_:1}),o("div",Y,[o("div",Z,[o("div",ee,[o("div",null,[r(e(c),{for:"email"},{default:n(()=>l[9]||(l[9]=[m("Nome")])),_:1}),r(e(v),{modelValue:e(a).name,"onUpdate:modelValue":l[1]||(l[1]=t=>e(a).name=t),placeholder:"Jhon Doe"},null,8,["modelValue"]),r(f,{message:e(a).errors.name},null,8,["message"])]),o("div",null,[r(e(c),{for:"email"},{default:n(()=>l[10]||(l[10]=[m("Email")])),_:1}),r(e(v),{modelValue:e(a).email,"onUpdate:modelValue":l[2]||(l[2]=t=>e(a).email=t),placeholder:"jhondoe@gmail.com"},null,8,["modelValue"]),r(f,{message:e(a).errors.email},null,8,["message"])])]),o("div",ae,[o("div",null,[r(e(c),{for:"email"},{default:n(()=>l[11]||(l[11]=[m("Telefone")])),_:1}),r(e(v),{modelValue:e(a).phone,"onUpdate:modelValue":l[3]||(l[3]=t=>e(a).phone=t),placeholder:"+55 (11) 99999-9999"},null,8,["modelValue"]),r(f,{message:e(a).errors.phone},null,8,["message"])]),o("div",null,[r(e(c),{for:"role"},{default:n(()=>l[12]||(l[12]=[m("Função")])),_:1}),r(e(G),{modelValue:e(a).role,"onUpdate:modelValue":l[4]||(l[4]=t=>e(a).role=t)},{default:n(()=>[r(e(H),{class:"w-[180px]"},{default:n(()=>[r(e(I),{value:e(a).role,placeholder:e(a).role},null,8,["value","placeholder"])]),_:1}),r(e(K),null,{default:n(()=>[r(e(R),null,{default:n(()=>[(u(!0),g(y,null,x(s.roles,(t,i)=>(u(),_(e(Q),{key:i,value:i},{default:n(()=>[m(V(t),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(f,{message:e(a).errors.role},null,8,["message"])])]),o("div",le,[b(o("input",{class:"w-4 h-4 rounded-md border border-gray-300",id:"notifications","onUpdate:modelValue":l[5]||(l[5]=t=>e(a).notifications=t),type:"checkbox"},null,512),[[$,e(a).notifications]]),l[13]||(l[13]=o("label",{for:"notifications",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Ativar notificações ",-1)),r(f,{message:e(a).errors.notifications},null,8,["message"])]),l[15]||(l[15]=o("hr",null,null,-1)),b(o("div",se,[l[14]||(l[14]=o("p",{class:"text-sm mb-2 font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Canais de notificação ",-1)),o("div",re,[(u(!0),g(y,null,x(s.alertChannels,(t,i)=>(u(),g("div",{key:i,class:"flex items-center space-x-2"},[b(o("input",{class:"w-4 h-4 rounded-md border border-gray-300",id:"edit-"+i,"onUpdate:modelValue":l[6]||(l[6]=E=>e(a).alert_channels=E),value:i,type:"checkbox"},null,8,oe),[[$,e(a).alert_channels]]),o("label",{for:"edit-"+i,class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},V(t),9,ne)]))),128))]),r(f,{message:e(a).errors.alert_channels},null,8,["message"])],512),[[B,e(a).notifications]])])]),r(e(j),null,{default:n(()=>[r(D,{onClick:C,disabled:e(a).processing},{default:n(()=>[e(a).processing?(u(),_(e(X),{key:0,class:"h-4 w-4 animate-spin"})):M("",!0),l[16]||(l[16]=m(" Atualizar "))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]))}});export{ye as _};
